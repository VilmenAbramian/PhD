\documentclass[12pt]{article}
\usepackage[T2A]{fontenc}    
\usepackage[english, russian]{babel}

\usepackage{fancyhdr} % пакет для установки колонтитулов
\pagestyle{fancy} % смена стиля оформления страниц
\fancyhf{} % очистка текущих значений
\fancyhead[C]{\thepage} % установка верхнего колонтитула
\renewcommand{\headrulewidth}{0pt}

% Возможно, нужная штука
%\usepackage[T2A]{fontenc}
%\usepackage[utf8]{inputenc}
%\selectlanguage{russian}

\usepackage{comment}
\usepackage[14pt]{extsizes}
\usepackage[includeheadfoot=false]{geometry}
\geometry{a4paper,total={170mm,257mm},left=2.5cm,right=1cm,top=2cm,bottom=2cm}

\input{preamble}
\input{heading-Slava}
%\bibliographystyle{utphys}
\usepackage{youngtab}
\usepackage{ytableau}
%\usepackage{amsmath}
\usepackage[numbers,sort&compress]{natbib}
\setlength{\bibsep}{2pt plus 0.3ex}
\usepackage[nottoc]{tocbibind}

% For bold symbols in formulas in paragraph titles: http://tex.stackexchange.com/a/124311
\makeatletter
\g@addto@macro\bfseries{\boldmath}
\makeatother

%\usepackage{graphicx}
\usepackage{multirow}

\usepackage{bm}
\usepackage{hhline}
\usepackage{physics}
\usepackage{tikz-cd}
\usepackage{mathtools}
\usepackage{authblk}
\usepackage{xcolor}

\theoremstyle{definition}
\newtheorem{definition}{Определение}[section]

\begin{document}
\setcounter{page}{2}

\tableofcontents
\pagebreak

\section*{Введение}
\addcontentsline{toc}{section}{Введение}

\textbf{Актуальность} 
Актуальность данной работы обусловлена необходимостью повышения надёжности и оперативности идентификации транспортных средств в современных системах обеспечения безопасности дорожного движения и мониторинга транспортных потоков. Существующие системы, основанные преимущественно на методах компьютерного зрения, подвержены существенному снижению вероятности распознавания номерных знаков в условиях неблагоприятных погодных факторов, загрязнения, высокой скорости движения и преднамеренного искажения. Использование технологии радиочастотной идентификации позволяет компенсировать указанные недостатки, однако эффективность RFID-систем существенно зависит от динамики объектов, параметров протокола и сценариев взаимодействия меток и считывателей, что требует разработки адекватных моделей для их анализа и оптимизации. Дополнительную актуальность приобретает задача применения мобильных RFID-считывателей, в том числе размещённых на беспилотных летательных аппаратах, для идентификации стационарных объектов в труднодоступных или динамически изменяющихся условиях, где использование стационарной инфраструктуры затруднено или экономически нецелесообразно. В этой связи разработка аналитических и имитационных моделей вероятности и времени RFID-идентификации, а также методов интеграции данных радиочастотной идентификации и компьютерного зрения в рамках \textcolor{red}{гибридных систем (систем совместного использования)}, является актуальной научно-технической задачей, имеющей как теоретическую, так и практическую значимость.

Несмотря на значительное число работ отечественных и зарубежных исследователей, посвящённых вопросам применения технологии радиочастотной идентификации в транспортных системах, до настоящего времени отсутствуют комплексные аналитические методы оценки вероятности и времени идентификации в условиях движения меток и считывателей, учитывающие одновременно особенности логического и физического уровней протокола стандарта EPC Class 1 Gen.2 и параметры радиоканала. Анализ производительности таких систем представляет собой сложную задачу вследствие стохастического характера процессов взаимодействия, зависимости результатов от динамики объектов, параметров протокола и многолучевого распространения сигналов. В этой связи разработка аналитических и имитационных моделей оценки эффективности RFID-идентификации транспортных средств и стационарных объектов, а также методов проектирования \textcolor{red}{гибридных систем (систем совместного использования)}, объединяющих данные радиочастотной идентификации и компьютерного зрения, определяет актуальность и научную новизну диссертационной работы.

\textbf{Объектом исследования} являются системы радиочастотной идентификации транспортных средств и стационарных объектов, функционирующие в условиях движения меток и считывателей, а также \textcolor{red}{гибридная система (система совместного использования)} идентификации, объединяющие технологии RFID и компьютерного зрения.

\textbf{Предметом исследования} являются аналитические и имитационные методы оценки вероятности и времени идентификации, а также методы анализа и проектирования гибридных систем радиочастотной идентификации с учётом параметров протокола EPC Class 1 Gen.2 и особенностей распространения радиосигналов.

\textbf{Цели исследования:}
разработка и исследование комплекса аналитических и имитационных моделей радиочастотной идентификации, предназначенных для оценки эффективности идентификации транспортных средств и стационарных объектов в условиях движения меток и считывателей. Полученные модели и методы используются для построения и анализа \textcolor{red}{гибридной системы (системы совместного использования)} идентификации транспортных средств, основанной на совместной обработке данных радиочастотной идентификации и компьютерного зрения, с целью повышения достоверности распознавания номерных знаков в условиях неопределённости и неблагоприятных факторов.

% В работе ставится задача анализа вероятности идентификации движущихся автомобилей статичными RFID-считывателями, а также времени идентификации статичных RFID-меток при использовании мобильных считывателей, размещённых на беспилотных летательных аппаратах. 

Для достижения этой цели были сформулированы следующие \textbf{задачи исследования}:

\begin{enumerate}
    \item разработка аналитической модели оценки вероятности идентификации транспортных средств с использованием RFID-технологии;
    \item разработка и исследование комплекса аналитических и имитационных моделей для анализа системы распределённого сбора информации с сенсорных полей с использованием БПЛА;
    \item разработка имитационной модели \textcolor{red}{гибридной системы (системы совместного использования)} идентификации ТС на базе RFID-технологии и существующей технологии фотовидеофиксации для оценки её эффективности.
\end{enumerate}

\textbf{Степень проработанности темы.} Степень проработанности темы.

\textbf{Основные положения, выносимые на защиту:}

\begin{enumerate}
    \item 1
    \item 2
    \item 3
    \item 4
\end{enumerate}

\textbf{Достоверность.}

Достоверность полученных в рамках диссертационной работы результатов обеспечивается надёжностью математического аппарата, используемого в исследовании, включающего в себя дифференциальную геометрию, теорию супермногообразий и суперотображений. \textit{(ТУТ СВОЁ)}

\textbf{Научная новизна.}
Впервые разработаны методы проектирования и реализации гибридной системы идентификации автомобилей с использованием технологии RFID (?). Разработан также комплекс новых аналитических и имитационных моделей для анализа вероятности и времени идентификации сенсорных меток с борта БПЛА, учитывающих особенности логического и физического уровней протокола стандарта EPC Class 1 Gen.2, и особенности распространения радиосигналов между RFID-меткой и считывателем.

Все представленные в диссертационной работе результаты являются новыми. Полученные в диссертационной работе результаты используются в научных исследованиях как российскими, так и зарубежными учёными и научными группами.

\textbf{Научная значимость.}

Научная значимость

\textbf{Апробация результатов работы.}

Результаты, полученные в ходе работы над диссертацией, были представлены и обсуждены на международных конференциях:
\begin{enumerate}
    \item 1
    \item 2
\end{enumerate}

\textbf{Личный вклад автора.}

Все представленные в диссертации результаты являются оригинальными и получены автором лично или при его непосредственном участии.

\textbf{Публикации.}

По материалам диссертации опубликовано 4 работы (ссылки), все они опубликованы в изданиях из перечня рецензируемых научных журналов ВАК. 

\textbf{Объём и структура работы.}
Диссертационная работа состоит из введения, 4 глав и заключения. Полный объём диссертационной работы составляет M страниц. Список литературы составляет L наименования.


\pagebreak

\section{Глава 1}
\label{sec:ch1}

\subsection{Обзор литературы}
\label{sec:ch11}
Радиочастотная идентификация (RFID, от англ. Radio Frequency Identification) в последние десятилетия получила широкое распространение как в научно-технической сфере, так и в повседневной жизни. Технология активно используется в системах контроля доступа, в торговле, при автоматической идентификации книг в библиотеках, а также в транспортной инфраструктуре — например, для регистрации пассажиров в метрополитене и общественном транспорте. По мере развития RFID решений расширяется и спектр их практического применения, что отражается в возрастающем числе научных публикаций, посвящённых различным аспектам радиочастотной идентификации.

Так, в работах \cite{Jung2015, Kumar2023} систематизированы основные направления внедрения RFID: транспорт, здравоохранение и социальная помощь, сельское хозяйство и животноводство, экологический мониторинг, а также обеспечение безопасности. Эти области были дополнены в последующих исследованиях примерами использования RFID в строительной отрасли, для мониторинга перемещения материалов и техники, а также в целях управления парковкой специализированного транспорта \cite{Sharma2020}.

Особого внимания заслуживает применение RFID в логистических процессах, где данная технология активно используется для учёта и отслеживания объектов. В обзоре \cite{Casella2022} подчёркивается высокая востребованность радиочастотной идентификации в логистике, о чём свидетельствует большое количество профильных публикаций в данном обзоре. Кроме того, RFID находит применение в задачах навигации и позиционирования в помещениях, где невозможна работа спутниковых систем. В частности, в работах \cite{Kunhoth2020, Smith2025, Alvarez-Merino2025} рассмотрены системы, использующие дешёвые пассивные метки для определения местоположения объектов. Подобные решения также применяются в качестве вспомогательных навигационных средств для людей с нарушениями зрения в общественных пространствах, включая станции метро.

\subsubsection{Исследования беспроводного канала RFID систем}

Одним из важнейших факторов, определяющих эффективность систем радиочастотной идентификации, является расстояние, на котором возможно устойчивое считывание метки. Этот параметр особенно критичен при использовании RFID в подвижных объектах, таких как транспортные средства, где необходимо обеспечить надёжную работу системы на максимально возможной дистанции. Существенное влияние на дальность оказывает характер распространения сигнала в радиоканале, прежде всего затухание, обусловленное свойствами среды и элементами системы.

Значительный вклад в изучение процессов распространения радиосигналов и параметров UHF RFID связи внесли исследования K. V. Rao и P. V. Nikitin \cite{Nikitin2006, Nikitin2006b, Nikitin2008}. В их работах подробно рассмотрено устройство пассивных RFID меток, включая параметры антенн, оказывающих наибольшее влияние на вероятность чтения. Важнейшими характеристиками по мнению авторов, определяющими дальность действия RFID метки, являются:

\begin{itemize}
    \item \textbf{Порог активации чипа метки} (\(P_{th}\)) — минимальная мощность, необходимая для включения RFID микросхемы. Чем ниже это значение, тем на большем расстоянии возможна её активация;
    
    \item \textbf{Усиление антенны метки} (\(G_r\)) — зависит от направленности диаграммы антенны, а также ограничено размерами и рабочей частотой метки;
    
    \item \textbf{Согласование поляризаций} между антеннами считывателя и метки — описывается коэффициентом согласования \(\chi\), и существенно влияет на эффективность передачи;
    \item \textbf{Согласование импеданса} между антенной и чипом — характеризуется коэффициентом передачи мощности \(\tau\) и определяет потери в точке подключения антенны
\end{itemize}

Суммарное условие успешной активации RFID метки выражается неравенством \cite{Rao2008}:
\begin{equation}\label{eq:power}
    P_{tag} = P_tG_tPlG_r\chi\tau\geq P_{th},
\end{equation}
где \(P_t\) — мощность, излучаемая считывателем; \(G_t\) — усиление его антенны; \(Pl\) — потери в канале; остальные параметры относятся к метке. Отметим, что величина \(P_t\) ограничивается законодательными нормами: например, в России в соответствии с ГКРЧ (государственная комиссия по радиочастотам) она не должна превышать 2 Вт.

В классических моделях распространения сигнала часто используется приближение свободного пространства и формула Фрииса \cite{Marrocco}:
\begin{equation}\label{eq:friis}
    P_r(d)=\frac{P_tG_t(\theta,\phi)G_r(\theta,\phi)\lambda^2}{(4\pi)^2r^2},
\end{equation}
где \(r\) — расстояние между антеннами, \(\lambda\) — длина волны, \(\theta\), \(\phi\) — углы азимута и места соответственно, показывающие зависимость диаграммы направленности от положения в пространстве. Хотя данная модель даёт хорошую оценку в простых условиях, в современных исследованиях применяются более сложные подходы, учитывающие многолучевое распространение, отражения, рассеяние и поглощение \cite{Alhassoun2019}.

Поскольку подавляющее большинство RFID систем используют пассивные метки ввиду их низкой стоимости и простоты, именно характеристики этих устройств оказывают решающее влияние на дальность связи. В обзоре \cite{MarrocMarroccoG} приведено подробное описание архитектуры меток, а также анализ влияния конструктивных параметров на качество связи. В \cite{Mayer2007} представлены результаты лабораторных испытаний различных меток: оценивались корректность отклика на команды, входной импеданс, рабочий диапазон мощности и эффективность обратного рассеяния. В \cite{Nikitin2012} даётся обоснование выбора измерительного оборудования для оценки параметров RFID канала, а в \cite{Nikitin2009} исследуется влияние протокола Gen2 \cite{StdGen2} на чувствительность и обратное рассеяние. Последние работы исследуют возможность увеличения дальности связи на десятки метров \cite{Rocha2024, Bendavid2024}

Существенное внимание в литературе уделяется математическому моделированию беспроводного канала и особенностям протокола связи \cite{ElAbsi2023, Padmal2024}. В работах \cite{Banerjee2007, Banerjee2008} предложен метод визуализации распространения сигнала, позволяющий оценить зависимость скорости чтения от высоты установки антенн, наличия препятствий и других факторов. Авторы модифицировали уравнение Фрииса под условия двух- и трёхлучевого распространения и провели эксперименты в безэховой камере.

Исследования \cite{Griffin2007, Griffin2009, Trotter2009, Hasan2011, Kaifas2024} посвящены построению моделей канала, описывающих передачу мощности от считывателя к метке и обратно, а также анализу различных антенн и их конфигураций. В работе \cite{Dimitriou2014} разработана стохастическая модель, учитывающая поляризацию и свойства отражающих объектов, и позволяющая оценить плотность вероятности успешного чтения в произвольной точке пространства. Её теоретические предсказания сопоставлены с экспериментальными данными. В \cite{Nikitin2008} рассматривается полный путь сигнала “считыватель — метка — считыватель” с учётом влияния схемы подключения антенн и поляризации.

Отдельно стоит отметить обзорную работу \cite{Marrocco}, в которой рассмотрены модели, описывающие дальность считывания с учётом рабочего цикла опроса, ограничений по мощности и направленности антенн. Представлены подходы различной сложности, позволяющие адаптировать расчёты под конкретные условия применения.

Также существуют работы \cite{Nikitin2010, Xie2025}, в которых с помощью исследования беспроводного канала связи RFID определяются пространственные характеристики метки.

На основе анализа представленных источников можно выделить четыре основные группы работ, приведённые в таблице~\ref{table:channel}.

\begin{table}[h]
\begin{tabular}{|l|l|}
\hline
Предмет исследования                  & Статьи                                                                                                                                    \\ \hline
Факторы, влияющие на дальность чтения & \cite{Nikitin2006, Nikitin2009, Nikitin2008}                                                                                                    \\ \hline
Исследование характеристик канала                   & \cite{Nikitin2006b, Marrocco, Banerjee2007, Banerjee2008, Griffin2007, Griffin2009, Trotter2009, Hasan2011, Dimitriou2014, Alhassoun2019, ElAbsi2023, Padmal2024, Kaifas2024}                                                             \\ \hline
Конструкция и параметры меток         & \cite{Rao2008, MarrocMarroccoG, Mayer2007, Nikitin2012, Nikitin2009, Rocha2024, Bendavid2024} \\ \hline
Определение положения метки              & \cite{Nikitin2010, Xie2025}                                                                                                   \\ \hline
\end{tabular}\caption{Классификация статей, относящихся к исследованию беспроводного канала связи в RFID системе}\label{table:channel}
\end{table}

Подробнее о моделировании канала будет изложено в главе 2.

\subsubsection{Применение RFID на наземном транспорте}\label{sec:vehicles}

Одним из первых направлений внедрения технологии радиочастотной идентификации в транспортной отрасли стало автоматическое взимание платы на платных автомагистралях. Первые коммерческие системы этого типа начали использоваться в США ещё в 1980-х годах, а уже в следующем десятилетии подобные решения получили широкое распространение в странах Европы \cite{Blythe1999, J.2005}. Также существуют современные работы, освещающие данную тему \cite{Mazumder2025}.

Идентификация транспортных средств с помощью RFID нашла применение в самых разных задачах: автоматическое открытие шлагбаумов, управление доступом, адаптация работы светофоров, поиск угнанных автомобилей и другое \cite{Tseng2007, Bhavke2017, Rajeshwari2015, Balbin2017}. Например, в работе \cite{Pedraza2018} описана экспериментальная система, реализованная в рамках контроля доступа автотранспорта на территорию университетского кампуса. Тестирование проводилось на выборке из 20 автомобилей, снабжённых RFID метками. Система позволяла оценивать загруженность въездов и фиксировать время нахождения транспорта на охраняемой территории. Отмечается, что использование активных меток даёт возможность существенно увеличить радиус действия \cite{Khan2011}. Аналогичные темы рассматриваются в одной из глав книги \cite{Ibrahim2025}.

Помимо идентификационной информации метки могут содержать дополнительные данные, такие как наличие штрафов или регистрационные сведения \cite{MenesesGonzalez2011, Lonkar2018}, а также использоваться в системах поиска угнанных транспортных средств \cite{Balbin2017}.

В ряде работ \cite{Vishn2012, Vishn2012_3, Vishn2013} рассматривается реализация автоматизированной системы фиксации нарушений правил дорожного движения с использованием RFID. В крупномасштабном эксперименте были задействованы 800 автомобилей с пассивными RFID метками, встроенными в номерные знаки. Считыватели устанавливались над дорогой, а испытания проводились в течение трёх месяцев в зимний период. Вероятность успешного считывания составила около 95\% \cite{Vishn2017}, что хорошо коррелирует с расчётными моделями вероятности идентификации транспортных средств \cite{Larionov2018, Vishn2023, Larionov2017, Jo2009}. Также RFID может применяться для мониторинга времени пребывания автомобиля в пути — пример подобного подхода описан в \cite{Gu2021}.

Особое внимание в литературе уделено возможности оценки скорости движения транспорта на основе RFID. В работах \cite{Zhai2018, Jing2013} предложен метод измерения скорости по уровню мощности принимаемого сигнала. При этом RFID метки размещаются в дорожном покрытии, а считыватели — на транспортных средствах. В статье \cite{Choy2020} описан обратный подход: метки устанавливаются на автомобиле, а считыватели — над дорогой.

С развитием интеллектуальных транспортных систем (ITS) внимание уделяется архитектурам с использованием самоорганизующихся сетей VANET (Vehicular Ad Hoc Networks) \cite{Al-Shareeda2023, Vishn2016_2}. В таких сетях RFID считыватели взаимодействуют с внешними базами данных и другими элементами дорожной инфраструктуры \cite{Vishn2016, F.Zhu2020}. RFID играет ключевую роль в обеспечении взаимодействия различных компонентов системы \cite{Zhang2018, Zhang2019, Shirabur2020, Pawowicz2020, Vishn2013, Vishnevsky2022, Larionov2017, Larionov2018, Vishnevsky2012}.

В работе \cite{Zhang2018} описана система мониторинга потока автомобилей и фиксации ДТП с использованием RFID, где предлагается алгоритм выбора оптимальных точек установки считывателей. В \cite{Amir2022, Vishn2016, Vishn228} рассматривается метод оптимального размещения базовых станций вдоль протяжённых участков магистралей. Данный метод применялся при проектировании сети вдоль трассы М7 «Волга» в районе города Казань.

В \cite{Zhang2019} описан подход к обнаружению дорожных заторов в городских условиях с использованием RFID для позиционирования. Предполагается, что транспортные средства, объединённые в VANET-кластеры, обмениваются информацией друг с другом. В \cite{Shirabur2020} предложена система, сочетающая данные от RFID меток и пьезодатчиков, встроенных в дорожное покрытие. Она позволяет в режиме реального времени регулировать приоритет движения для спецтранспорта. Архитектура высокопроизводительной RFID системы массовой идентификации транспортных средств, с учётом зоны считывания и скорости движения, подробно рассмотрена в \cite{Pawowicz2020}. Производительность подобных систем исследуется и в работе \cite{Unterhuber2020}, в том числе на железнодорожном транспорте.

Технологии RFID также находят применение в системах позиционирования \cite{Zhang2025, Ajroud2025, Yang2024}. Хотя в большинстве случаев используется GPS/ГЛОНАСС, радиочастотная идентификация может служить надёжным вспомогательным источником информации. В \cite{Zheng2018} рассмотрено уточнение координат GPS путём использования RFID меток, установленных вдоль дороги, и считывателей, установленных на транспортных средствах. В работе \cite{Lu2021} приводится протокол передачи координат, полученных с помощью RFID, в систему VANET для динамической оптимизации маршрутов. В \cite{Garcia2018} рассматривается определение координат и препятствий в условиях плохой видимости с помощью двухлучевой модели канала связи и экспериментальной валидации.

В некоторых работах рассматривается возможность размещения меток не на инфраструктуре, а непосредственно в дорожном покрытии, как предложено в статье \cite{Qin2021}. При этом транспортное средство, оснащённое считывателем, может точно определить своё положение. Рассматриваются алгоритмы устранения коллизий, возникающих при одновременном чтении метки несколькими устройствами, и их эффективность подтверждается с помощью моделирования.

Отдельным направлением является позиционирование в железнодорожном транспорте, включая высокоскоростные поезда. В \cite{Zhang2010, Zhang2011} предложено использовать RFID метки, размещённые по всей длине поезда, и считыватели между шпалами. В работе \cite{Buffi2017t} представлена обратная схема, при которой считыватель размещается на поезде, а метки — вдоль рельсов. Похожая архитектура предложена и для подземных метрополитенов \cite{Kostrominov2020}. На данный момент подобные системы уже применяются, о чём свидетельствуют статьи и спецификации в интернет-ресурсах \cite{train_pos_system, tag_master}

RFID технологии также применяются в задачах, не связанных напрямую с идентификацией транспортных средств. Например, в работе \cite{Yang2020} представлена система предотвращения засыпания водителя с применением RFID, аналогичная тем, что уже используются в общественном транспорте \cite{mosmetro_site}. В \cite{Teng2010} описана система навигации для мобильного робота на основе RFID, позволяющая ему следовать заданной траектории.

Отдельного упоминания заслуживает работа \cite{Vishnevsky2022}, в которой впервые описан гибридный комплекс, совмещающий существующие системы видеонаблюдения и RFID для идентификации транспортных средств. Комплекс был протестирован в Москве, Санкт-Петербурге и Казани на базе инфраструктуры ГИБДД и показал положительные результаты.

Обобщённая классификация направлений применения технологии радиочастотной идентификации на транспорте представлена в таблице~\ref{table:transport}.

\begin{table}[ht]
\begin{tabular}{|l|l|}
\hline
Применение RFID            & Работы                                                                                                                                                                           \\ \hline
Идентификация транспорта   & \cite{Madana2020, Pandit2009, Jo2009, Pedraza2018, Gu2021, Tseng2007, Bhavke2017, Rajeshwari2015, MenesesGonzalez2011, Khan2011, Balbin2017, Lonkar2018, Ahmed2019, Pawowicz2020, Ibrahim2025} \\ \hline
Измерение скорости ТС        & \cite{Zhai2018, Jing2013, Choy2020}                                                                                                                                                     \\ \hline
Умные автодороги               & \cite{Al-Shareeda2023, F.Zhu2020, Zhang2018, Zhang2019, Shirabur2020, Pawowicz2020, Unterhuber2020, Vishnevsky2022, Larionov2017, Larionov2018, Vishnevsky2012, Vishn2012_3, Vishn2012, Vishn2013, Vishn2017, Vishn2023, Vishn2016, Vishn2016_2, Amir2022, Vishn228, Mazumder2025}                                                                                     \\ \hline
Железнодороржный транспорт            & \cite{Zhang2010, Zhang2011, Buffi2017t, Kostrominov2020}                                                                                                                                \\ \hline
Определение местоположения & \cite{Zheng2018, Lu2021, Garcia2018, Qin2021, Zhang2025, Ajroud2025, Yang2024}                                                                                                                                           \\ \hline
Нестандартные приложения   & \cite{Yang2020, Teng2010}                                                                                                                                                               \\ \hline
\end{tabular}
\caption{Сферы применения RFID на транспорте}\label{table:transport}
\end{table}

\subsubsection{Применение RFID на беспилотных летательных аппаратах}\label{sec:UAV}

Беспилотные летательные аппараты (БПЛА) активно применяются как в гражданском секторе, так и в оборонной промышленности \cite{Choi2023, Mohsan2023, Gope2021}. В последние годы особый интерес вызывает интеграция RFID технологии в состав аппаратных решений на базе дронов. Наиболее распространённым сценарием является установка RFID считывателя на борт БПЛА, с которого осуществляется опрос меток, размещённых на объектах в исследуемой зоне. Например, в работах \cite{Quino2021,Quino2022} описан подход к мониторингу сельскохозяйственных культур путём считывания данных с RFID меток, размещённых на полях. Исследования включают эксперименты по определению оптимальной высоты полёта и скорости дрона, обеспечивающих заданную вероятность чтения. В \cite{Quino2022} рассматриваются также различные алгоритмы полёта, минимизирующие потери данных при пролёте над метками.

Ещё одним направлением применения RFID дронов является экологический мониторинг \cite{LeBreton2024}, в том числе в сфере рыбного хозяйства. В работе \cite{Yang2017} предложено размещение RFID меток в рыболовных сетях для выращивания устриц. Считывание данных осуществляется с воздуха, что упрощает поиск брошенных снастей в прибрежной зоне Тайваня.

Дополнительные возможности открываются при использовании сенсорных RFID меток, содержащих встроенные датчики температуры, влажности и других параметров \cite{Gortschacher2019, Kudyba2025, Mulloni2024}. Такие метки, включая пассивные и полупассивные модели, доступны на коммерческих платформах \cite{atlasrfidstore_site, dipolerfid_site}. В работе \cite{Wang2015} описана система, в которой БПЛА последовательно посещает заранее заданные координаты расположения меток, снижаясь до одного метра для сбора данных. Разработан механизм передачи информации с метки на сервер через специальный дрон, выполняющий роль ретранслятора. Также в работе автора диссертации рассматривается вопрос о времени, необходимом для чтения данных с сенсорной метки при разных условиях полёта БПЛА и количестве передаваемых данных \cite{Abramian2024}

Для мониторинга климатических условий также применяется система из мини-БПЛА с сенсорными метками и основного дрона со считывателем \cite{Longhi2016, Longhi2017, Longhi2017a}. Разработанная математическая модель применяется для построения температурных карт на разных высотах, которая верифицируется экспериментальными измерениями. В \cite{Casati2017} проведён сравнительный анализ характеристик канала связи между RFID считывателем на БПЛА и различными типами меток.

В области логистики и хранения продовольствия предложены решения по контролю состояния упаковки на складах с использованием RFID меток и БПЛА. В работе \cite{Almalki2020} описана система для оценки целостности упаковки, которая позволяет автоматизировать контроль условий хранения продуктов питания.

Интересной задачей является определение местоположения RFID меток и связанных с ними объектов. В ряде исследований \cite{Buffi2017,Buffi2018,Buffi2018a,Buffi2019,Aouladhadj2023} разработаны алгоритмы, позволяющие дрону определять положение меток, размещённых в случайных или заранее неизвестных точках. Для этого БПЛА оборудуется RFID считывателем, модулем GPS и средствами беспроводной связи. Предложенные алгоритмы тестировались как в симуляциях, так и в реальных условиях.

Методы позиционирования могут также использоваться для отслеживания самих БПЛА. В \cite{Habaebi2020} представлен подход на основе измерений RSS (Received Signal Strength) между наземным считывателем и RFID меткой, установленной на дроне. В работе \cite{Abramian2022} исследуется вероятность успешного считывания с учётом различных параметров полёта и настроек протокола связи. Предлагается как аналитическая, так и имитационная модель взаимодействия.

Применение RFID в помещениях также остаётся актуальным. В \cite{Li2021} представлена система, позволяющая находить конкретные товары на многоуровневых складских стеллажах. Для этого дрон снабжается двумя антеннами, обеспечивающими считывание с обеих сторон стеллажа, а для повышения точности используется алгоритм с элементами машинного обучения. Система позволяет определять не только секцию, но и конкретную полку, на которой находится искомый объект.

В области защищённой передачи данных \cite{Shariq2024} и оборонной сфере RFID также применяется для идентификации самих БПЛА. В работе \cite{Gope2021} рассматривается механизм аутентификации дронов на военных объектах с использованием защищённого протокола обмена между RFID меткой и наземным считывателем.

На базе RFID и БПЛА разрабатываются и коммерческие решения. В \cite{Wu2019} описана концепция системы «умной парковки», в которой дрон с RFID считывателем на борту осуществляет поиск свободных мест и анализирует положение автомобилей. Практическая реализация подобной системы описана на сайте компании Exponent\href{https://exponent-ts.com/}~\cite{exp_site}, предлагающей решения как для парковок, так и для идентификации объектов на складах. Аналогичные услуги предлагают компании\href{https://squadrone-system.com/en/solutions/drone-rfid/}~\cite{squ_system_site, fraunhofer_site}, использующие специализированные дроны с RFID оборудованием для мониторинга различных объектов.

Следует отметить, что ряд перспективных направлений остаётся слабо изученным. В частности, в существующей литературе недостаточно внимания уделяется использованию RFID при точной посадке БПЛА, а также в системах локальной навигации в условиях отсутствия спутниковых сигналов. Ещё одним направлением будущих разработок может стать идентификация неопознанных дронов \cite{Alam2023, Basak2022, Sazdic-Jotic2022, Khan2022}.

Обобщённая классификация направлений применения RFID совместно с БПЛА представлена в таблице~\ref{table:UAV}.

\begin{table}[]
\renewcommand{\arraystretch}{1.2}
\begin{tabular}{|p{4.5cm}|p{4.2cm}|p{6.2cm}|}
\hline
\textbf{Применение RFID на БПЛА} & \textbf{Место крепления метки} & \textbf{Статьи} \\ \hline
Сбор данных из труднодоступных мест & Идентифицируемый объект & \cite{Quino2021,Quino2022,Yang2017,Longhi2016,Longhi2017,Casati2017,LeBreton2024,Abramian2022,Choi2023, Mohsan2023} \\ \hline
\multirow{2}{=}{Сбор данных с сенсорных меток} & Идентифицируемый объект & \cite{Almalki2020,Gortschacher2019,Wang2015,Longhi2017a,Abramian2024,Kudyba2025,Mulloni2024} \\ \cline{2-3}
& БПЛА & \cite{Longhi2016,Longhi2017} \\ \hline
Определение местоположения & Стены и поверхности & \cite{Buffi2017,Buffi2018,Buffi2018a,Buffi2019,Habaebi2020,Li2021,Wu2019,Aouladhadj2023} \\ \hline
Безопасность & БПЛА & \cite{Gope2021,Shariq2024, Alam2023, Basak2022, Sazdic-Jotic2022, Khan2022} \\ \hline
\end{tabular}
\caption{Направления совместного использования технологий RFID и БПЛА}
\label{table:UAV}
\end{table}


\subsection{Протокол EPC class 1 Gen.2}
\label{sec:EPCclass1Gen2}

\subsubsection{Стандарты RFID}

На данный момент существует несколько разновидностей стандартов радиочастотной идентификации, которые классифицируются по частотным диапазонам, типам меток и особенностям протоколов взаимодействия между считывателем и меткой. Наиболее широко используемые частотные диапазоны включают:

\begin{itemize}
    \item \textbf{НЧ (LF, 125–134 кГц)} --- стандарты ISO~11784/11785 и ISO~14223. Применяются в животноводстве, системах контроля доступа и идентификации животных. Отличаются высокой надёжностью при небольшой дальности действия (до 10 см).
    
    \item \textbf{ВЧ (HF, 13{,}56 МГц)} --- стандарты ISO/IEC~14443 (для бесконтактных смарт-карт), ISO/IEC~15693 (для меток с большей дальностью) и ISO/IEC~18000-3. Применяются в билетных системах, библиотеках, логистике, банковских картах и т.\,п.

    \item \textbf{УВЧ (UHF, 860–960 МГц)} --- наиболее активно развивающееся направление. В первую очередь используется стандарт \textbf{EPCglobal Class-1 Generation-2} (EPC~Gen2), который был стандартизован в ISO/IEC~18000-6C и далее развит до версии EPC~Gen2~v3.0. Применяется в логистике, складском учёте, розничной торговле и в других областях, описанных в обзоре литературы.

    \item \textbf{Микроволновой диапазон (2{,}45 ГГц и выше)} --- стандарты ISO/IEC~18000-4 и 18000-5. Используются реже из-за высокой чувствительности к преградам и радиопомехам.
\end{itemize}

Кроме частотной классификации, различают стандарты по уровню взаимодействия. Например, ISO/IEC~18000 является обобщающим семейством, охватывающим все частотные диапазоны и определяющим интерфейсы между считывателем и меткой на различных уровнях (физическом, канальном, протокольном).

Стандарты EPCglobal (в частности, EPC Gen2) ориентированы на массовое применение в цепях поставок и поддерживают как пассивные, так и сенсорные метки. Последняя версия стандарта — EPC Radio Frequency Identity Protocols Generation-2 UHF RFID, Version 3.0 (2024 г.) — включает расширенные возможности в области безопасности, идентификации, управления энергопотреблением и поддержки пользовательских команд. В документе реализованы улучшенные механизмы управления коллизиями, адаптации параметров инвентаризации, а также добавлены новые команды, расширяющие возможности взаимодействия между считывателем и меткой.

Таким образом, выбор стандарта зависит от требований к дальности, скорости обмена, надёжности и особенностей среды применения. В настоящей работе основное внимание уделяется стандарту EPC~Gen2~v2.0.1 как наиболее релевантному для построения пассивных сенсорных систем с применением БПЛА.

Стандарт EPC Class-1 Generation-2 UHF RFID Protocol (далее --- EPC Gen2) представляет собой спецификацию протокола радиочастотной идентификации для пассивных и полупассивных меток, функционирующих в диапазоне 860--960~МГц. Текущая версия стандарта (3.0) поддерживает обратную совместимость с предыдущими реализациями (в частности, версиями 1.0.0, 1.1.0, 2.0.1), обеспечивая более надёжное взаимодействие между метками и считывателями, а также расширенный набор функциональных возможностей.

Стандарт EPC Gen2 регламентирует поведение устройств на двух нижних уровнях модели OSI: физическом (PHY) и канальном (MAC). Особое внимание уделяется организации процедуры инвентаризации, устранению коллизий, а также форматам команд и временным интервалам в протоколе.

\subsubsection{Физический уровень}

На физическом уровне стандарт определяет параметры модуляции и кодирования, применяемые в восходящем и нисходящем канале. Считыватель передаёт команды меткам с использованием амплитудной манипуляции (ASK) или фазовой модуляции (PR-ASK) в соответствии с таблицами параметров. Метки отвечают считывателю, используя механизм обратного рассеяния (backscatter), модулируя сигнал несущей частоты, создаваемой считывателем в режиме CW (Continuous Wave).

Сигнал от метки кодируется с использованием FM0 или Miller-кодирования (Miller-2, -4 или -8), где выбор схемы зависит от требований к скорости передачи, устойчивости к шуму и расстояния до считывателя. Код FM0 обеспечивает наивысшую скорость, но хуже защищён от ошибок, в то время как код Миллера с высоким значением $M$ обеспечивает большую надёжность при снижении скорости передачи.

Важную роль в физическом уровне играет параметр \texttt{Tari}, определяющий длительность базового временного интервала при передаче команд считывателя. Именно \texttt{Tari} служит основой для определения длительности битов в нисходящем канале (от считывателя к метке). В типичных реализациях используются значения от 6.25~мкс до 25~мкс. Длительность каждой команды считывателя зависит от количества передаваемых битов, кодировки (PIE — Pulse Interval Encoding), преамбулы и соотношения между единицами и нулями в полезной нагрузке. Чем больше длина команды и выше значение \texttt{Tari}, тем больше время передачи.

Передачи от метки к считывателю, в свою очередь, определяются через параметры:

\begin{itemize}
    \item \texttt{DR} (Data Rate) — отношение скорости передачи данных к базовой частоте модуляции. Стандарт допускает значения \texttt{DR}~$=8$ и \texttt{DR}~$=64/3$, определяющие частоту обратного рассеяния.
    \item \texttt{M} — порядок кода Миллера. Чем выше $M$ (Miller-2, 4, 8), тем выше устойчивость к шуму, но тем дольше передаётся один бит.
\end{itemize}

Согласно стандарту, длительность ответа от метки на конкретную команду можно оценить как:

\[
T_{\text{resp}} = \frac{m}{BLF}(L_{\text{preamble}} + L_{\text{payload}} + 1),
\]

где $m$ — порядок кода Миллера, $BLF$ — частота обратного рассеяния, $L_{\text{payload}}$ — длина полезной нагрузки в битах, а $+1$ учитывает дополнительный завершающий бит. Длительность преамбулы зависит от типа кодировки: у FM0 она составляет 6 бит, у Миллера — от 6 до 18 бит.

Кроме того, в протокол встроены временные интервалы:

\begin{itemize}
    \item $T_1$ — минимальное время между концом команды считывателя и началом ответа метки. Обычно $T_1 = \max(\text{RTcal}, 10T_{\text{pri}})$.
    \item $T_2$ — интервал ожидания считывателем начала ответа метки, не менее $3T_{\text{pri}}$.
\end{itemize}

Значения \texttt{RTcal} и \texttt{TRcal}, передаваемые считывателем при установлении соединения, позволяют метке синхронизировать своё время с командой считывателя и адаптироваться к параметрам передачи. Эти параметры также влияют на определение скорости передачи и на выбор схемы модуляции.

Таким образом, параметры \texttt{Tari}, \texttt{DR} и \texttt{M} играют ключевую роль в согласовании временных характеристик канала связи, определяя как пропускную способность, так и надёжность канала передачи. Оптимальный выбор этих параметров позволяет учитывать внешние условия (расстояние, шум, плотность меток) и добиваться устойчивой идентификации в различных сценариях работы.

\subsubsection{Канальный уровень и процедура инвентаризации}

Канальный уровень протокола EPC Gen2 построен на основе фреймированной версии алгоритма Slotted ALOHA. Вся процедура обмена данными организована в виде \textbf{раундов инвентаризации}, каждый из которых состоит из фиксированного числа \textbf{слотов}, определяемого параметром \texttt{Q}: $L = 2^Q$.

Процедура начинается с передачи команды \texttt{Query}, в которой считыватель задаёт:

\begin{itemize}
    \item значение параметра \texttt{Q}, определяющее длину раунда;
    \item номер текущей сессии \texttt{S} (\texttt{Session 0--3});
    \item значение флага селекции \texttt{SL}, указывающее, какие метки активны;
    \item флаг таргетирования \texttt{Target}, определяющий текущую группу опрашиваемых меток (например, с флагом A или B).
\end{itemize}

Получив команду \texttt{Query}, каждая метка, соответствующая условиям фильтрации (по \texttt{SL}, \texttt{S} и \texttt{Target}), переходит в состояние \texttt{Arbitrate}. Там она инициализирует внутренний счётчик слота \texttt{SlotCounter} случайным числом от 0 до $2^Q - 1$ и ждёт команд \texttt{QueryRep}, которые уменьшают это значение на 1 при каждом поступлении.

Когда \texttt{SlotCounter} достигает нуля, метка переходит в состояние \texttt{Reply} и передаёт 16-битное случайное число \texttt{RN16}, сгенерированное ранее. Если считыватель принимает этот ответ без ошибок, он отправляет команду \texttt{Ack}, в теле которой содержится \texttt{RN16}. Если метка получает команду \texttt{Ack} и убеждается, что значение совпадает с переданным, она переходит в состояние \texttt{Acknowledged} и отправляет свой идентификатор EPC (вместе с контрольными данными PC и CRC).

После этого считыватель может направить команды чтения или записи (\texttt{Read}, \texttt{Write}) для получения данных из других банков метки, например \texttt{TID} или \texttt{USER}. По завершении обмена считыватель может послать команду \texttt{QueryAdjust} или завершить раунд.

Если в одном слоте одновременно несколько меток переходят к передаче \texttt{RN16}, возникает \textbf{коллизия}, и ответ не может быть расшифрован. В этом случае считыватель переходит к следующему слоту. Таким образом, эффективность инвентаризации напрямую зависит от выбора параметра \texttt{Q}: слишком маленькое значение приводит к частым коллизиям, а слишком большое --- к пустым слотам и увеличению общего времени раунда.

Каждый \textbf{раунд инвентаризации} заканчивается, когда все $2^Q$ слота были обработаны (то есть после $2^Q$ команд \texttt{QueryRep} или других событий, завершающих слоты). После этого считыватель может инициировать новый раунд, отправив ещё одну \texttt{Query}, либо выполнить команду \texttt{QueryAdjust}, чтобы скорректировать значение \texttt{Q} без полной перезаписи сессионных состояний меток.

В протокол встроены временные интервалы, регламентирующие продолжительность передачи и ожидания на каждом этапе:

\begin{itemize}
    \item $T_1$ --- интервал между окончанием передачи команды считывателя и началом ответа метки;
    \item $T_2$ --- интервал ожидания ответа от метки;
    \item $T_3$ и последующие --- временные параметры для межкадровых пауз, переключения состояний и других действий.
\end{itemize}

Таким образом, вся процедура инвентаризации реализует слотоориентированную стратегию доступа с управлением через команды \texttt{Query}, \texttt{QueryRep}, \texttt{QueryAdjust}, что позволяет эффективно взаимодействовать с множеством меток, минимизируя вероятность коллизий и оптимизируя длительность раундов.

\subsubsection{Расширенные команды и механизм QueryAdjust}

Для повышения эффективности процедуры инвентаризации, начиная с версии 2.0.1, стандарт вводит дополнительные команды, в частности \texttt{QueryAdjust}. Эта команда позволяет считывателю динамически изменять значение \texttt{Q} в ходе одного раунда инвентаризации без необходимости полного сброса состояния меток. Она может быть использована для уменьшения или увеличения значения \texttt{Q} на 1, либо оставления его без изменения, в зависимости от загруженности слотов в текущем раунде. Это позволяет оптимизировать работу в условиях переменного числа меток в зоне считывателя, снижая вероятность коллизий и повышая эффективность чтения.

Также в новой версии протокола определены механизмы смены флага селекции (\texttt{SL}), состояния опроса (\texttt{Session}) и расширенные форматы команд для работы с памятью метки (банки \texttt{EPC}, \texttt{TID}, \texttt{USER}, \texttt{RESERVED}).

\subsubsection{Организация памяти метки}

Каждая RFID метка стандарта EPC Gen2 содержит четыре логических банка памяти:

\begin{itemize}
  \item \textbf{RESERVED} --- используется для хранения ключей доступа и управления;
  \item \textbf{EPC} --- содержит уникальный идентификатор метки (его можно менять);
  \item \textbf{TID} --- содержит идентификатор производителя и тип метки (изменить невозможно);
  \item \textbf{USER} --- используется для хранения произвольных пользовательских данных.
\end{itemize}

Команды чтения и записи могут быть адресованы к любому из банков с указанием смещения и длины блока. Также предусмотрены команды блокировки, уничтожения метки (\texttt{Kill}) и защита с помощью пароля.

\subsubsection{Обработка коллизий и сессии}

Система с несколькими активными метками должна эффективно справляться с одновременными ответами. В протокол встроен механизм, позволяющий каждому считывателю использовать четыре независимые сессии (\texttt{Session 0--3}), каждая из которых управляет своими флагами состояния. Это даёт возможность использовать параллельные или взаимозаменяемые процедуры идентификации.

Протокол EPC Gen2 задаёт временные интервалы, в течение которых считыватель ожидает ответ от метки после каждой команды. Чёткое соблюдение этих временных рамок (интервалы \texttt{T1}, \texttt{T2}, \texttt{T3} и т.д.) критически важно для корректной синхронизации.

\subsubsection{Заключение}

Стандарт EPC Gen2 v2.0.1 представляет собой гибкий и масштабируемый протокол, обеспечивающий устойчивую идентификацию объектов с использованием пассивных RFID меток. Наличие команд управления сессиями, адаптивного механизма настройки параметра \texttt{Q}, а также расширенных возможностей по работе с памятью метки делают данный стандарт пригодным для широкого круга приложений --- от складской логистики до сенсорных сетей с телеметрией. В следующих разделах диссертации будет рассмотрено поведение системы в различных режимах, моделирование вероятности идентификации и оценка эффективности команд, включая \texttt{QueryAdjust}.



\subsection*{Выводы}
\addcontentsline{toc}{subsection}{Выводы}

Выводы

\pagebreak

\section{Глава 2. Вероятность взаимодействия движущегося объекта с RFID меткой}
\label{sec:ch2}

\subsection{Введение}
\label{sec:ch21}

Рассмотрим следующую формальную задачу. Имеются RFID считыватель и метка, работающие по стандарту EPC Class 1 Gen. 2 (ISO 18000-6C)~\cite{StdGen2}. В системе отсчёта считывателя метка (например, находящаяся на автомобиле), двигаясь прямолинейно и равномерно с постоянной скоростью $v$, попадает в зону считывания длиной $L$, после чего начинается обмен сигналами между считывателем и меткой.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{images/2_chapter/scheme_car.png}
    \caption{Схема комплекса радиочастотной идентификации.}
    \label{fig:scheme}
\end{figure}

Предположим, что характерное время передачи и получения сообщений $t\ll \frac{L}{v}$. Зададимся вопросом о том, с какой вероятностью произойдёт успешная идентификация метки.

\subsection{Модель канала}
Прежде, чем переходить к математическому описанию рассматриваемого процесса, важно обсудить методы и приближения, используемые при моделировании канала связи. Данные приближения используются как при получения формул, необходимых для дальнейшего развития аналитической модели, так и для построения имитационной модели, с которой будут сравниваться результаты теоретического расчёта. 

Предполагается два варианта получения сигнала меткой:

\begin{enumerate}
    \item Метка получает только прямой луч от считывателя;
    \item Метка получает как прямой луч, так и отражённый от стены, вдоль которой перемещается считыватель.
\end{enumerate}

Во втором случае важно учитывать коэффициент отражения луча от стены, который будет зависеть от коэффициентов диэлектрической проницаемости и проводимости стены, от которой будет происходить отражения, а также от угла падения. В данной работе для расчёта коэффициента отражения использовалась формула

\begin{equation}
    R = \frac{\sin(\phi)-\sqrt{C}}{\sin(\phi)+\sqrt{C}}\,,
\end{equation}

где $\phi$ - угол падения, а $C$ определяется, как

\begin{equation}
    C = \eta-\cos^2(\phi)
\end{equation}

для горизонтально поляризованной компоненты и

\begin{equation}
    C = \frac{\eta-\cos^2(\phi)}{\eta^2}
\end{equation}

для вертикально поляризованной компоненты.\footnote{А для круговой поляризации?} $\eta$ - это комплексная диэлектрическая проницаемость стены, определяемая формулой

\begin{equation}
    \eta = \varepsilon_r(f)-60i\lambda\sigma(f)\,,
\end{equation}

где $\varepsilon_r(f)$ и $\sigma(f)$ - относительная диэлектрическая проницаемость и проводимость среды, как функции от частоты $f$, соответственно, а $\lambda$ - длина волны. На рисунке \ref{fig:Reflection} представлена зависимость коэффициента отражения от угла падения для различных поляризаций.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=.9\linewidth]{images/2_chapter/Reflection coefficient.png}
    \caption{Расчёт коэффициента отражения.}
    \label{fig:Reflection}
\end{figure}

Для расчёта предполагается, что и у считывателя, и у метки - простые дипольные антенны диаграммой направленности, которая определяется формулой

\begin{equation}
    \Gamma(\theta) = |\frac{\cos(\frac{\pi}{2}\sin(\theta))}{\cos(\theta)}|\,,
\end{equation}

где $\theta$ - угол между направлением главного луча антенны и направлением прихода сигнала, а $\Gamma(\theta)$ - относительная амплитуда излучения в направлении $\theta$.

Поскольку рассматриваемые в данной работе сенсорные метки являются пассивными (то есть они включаются и передают сигнал лишь после попадания в зону антенны считывателя), а значит не обладают собственным источником питания, неизбежным оказывается вопрос о расчёте затухания сигнала. Здесь и далее верхний индекс $(r)$ будет использован для обозначения величин, связанных со считывателем, а верхний индекс $(t)$ - для величин, связанных с меткой.

Пусть имеется пучок из $N$ лучей, каждому из которых соответствует вызванный отражением коэффициент затухания $R_i$, $i=1,\ldots,N$. Также, в силу направленных свойств передающей и принимающей антенн необходимо учесть затухание, вызванное направлениями диаграмм направленности считывателя и метки. Соответствующий коэффициент затухания обозначим за $\Gamma_i=\Gamma_i^{(r)}\Gamma_i^{(t)}$. Наконец, введя $r(t)$ - величину принятого сигнала, как функцию времени $t$, выпишем формулу для затухания $A_{pl}$:

\begin{equation}
    A_{pl} = |r(t)|^2 = \left( \frac{\lambda}{4\pi} \right)^2 
\left| \sum_{i=0}^N \frac{R_i \Gamma_i}{d_i} 
e^{-i k (d_i - v t \cos \psi_i)} \right|^2\,,
\end{equation}

где первый множитель $i$ в экспоненте - мнимая единица, $d_i$ - длина $i$-го луча от передатчика до приёмника, $k = \frac{2\pi}{\lambda}$ - модуль волнового вектора, а $\psi_i$ - угол между волновым вектором и направлением движения $i$-го луча. Для статичных метки и луча результат расчёта затухания представлен на рисунке \ref{fig:SPL}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=.9\linewidth]{images/2_chapter/Static path loss.png}
    \caption{Расчёт затухания в статичном случае.}
    \label{fig:SPL}
\end{figure}

Перейдём к расчёту мощностей сигналов, которыми обмениваются считыватель и метка. Пусть $P^(r)_{tx}$ - мощность сигнала, излучаемого считывателем, а $G^{(r)}$ - усиление антенны считывателя. Нижний индекс здесь и далее используется для указания направления передачи: $tx$ - для передачи, $rx$ - для приёма. В таком случае эффективная изотропная излучаемая мощность $EIRP$ вычисляется по формуле

\begin{equation}
    EIRP = P_{tx}^{(r)} G^{(r)}\,.
\end{equation}

При распространении сигнала от считывателя к метке сигнал испытывает затухание $A_{pl}^{reader-to-tag}$, зависящее от состояния радиоканала и взаимного расположения считывателя и метки. Антенны устройств могут иметь различную поляризацию, что ведёт к дополнительным потерям $A_{pol}$. Пусть $G^{(t)}$ - усиление антенны метки. Тогда мощность сигнала, принимаемого меткой, можно вычислить, как

\begin{equation}
    P_{rx}^{(t)} = P_{tx}^{(r)} G^{(r)} A_{\text{pl}}^{reader-to-tag} A_{\text{pol}} G^{(t)}\,.
\end{equation}

Если эта мощность меньше чувствительности метки $P_{sensitivity}^{(t)}$, то метка не включится и не сможет взаимодействовать со считывателем. Если мощность достаточна, метка передаст свой ответ мощностью $P_{tx}^{(t)}$ за счёт модуляции отражённого сигнала. Так как при этом возникают дополнительные энергетические потери (например, на модуляцию), равные 
$A_{\text{bs}}$, то связь между принятой и переданной меткой мощностью можно вычислить по формуле 

\begin{equation}
    P_{tx}^{(t)} = P_{rx}^{(t)} A_{\text{bs}}\,,
\end{equation}

то есть метка излучает меньшую мощность по сравнению с той, что она приняла.

В итоге в конце процесса обмена данными между считывателем и меткой мощность сигнала, принятого считывателем, вычисляется по формуле:

\begin{equation}
    P_{rx}^{(r)} = P_{tx}^{(t)} G^{(t)} A_{\text{bs}} A_{\text{pl}}^{tag-to-reader} A_{\text{pol}} G^{(r)}\,.
\end{equation}

В общем случае потери на прямом (от считывателя к метке) и обратном (от метки к считывателю) пути могут отличаться. Это происходит из-за различий в поляризации (считыватели часто используют круговую, а метки — линейную), а также из-за коэффициента отражения (в текущем случае - от стены).

\begin{figure}[htbp]
    \centering
    \includegraphics[width=.9\linewidth]{images/2_chapter/Channel budget.png}
    \caption{Расчёт бюджета канала.}
    \label{fig:budget}
\end{figure}

Поскольку, вообще говоря, в рассматриваемой задаче предполагается относительное движение метки и считывателя, при расчёте мощностей сигнала и затуханий важно учитывать эффект Доплера. 

\begin{figure}[htbp]
    \centering
    \includegraphics[width=.9\linewidth]{images/2_chapter/Dinamic path loss.png}
    \caption{Расчёт затухания в динамическом случае.}
    \label{fig:DPL}
\end{figure}

Как видно из рисунков \eqref{fig:DPL} и \eqref{fig:Power_Dopler}, учёт эффекта Доплера приводит к увеличению колебаний в амплитудах затухания и мощности сигнала на считывателе.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=.9\linewidth]{images/2_chapter/Power Dopler.png}
    \caption{Расчёт затухания в динамическом случае.}
    \label{fig:Power_Dopler}
\end{figure}

Наконец, перейдём к описанию битовой ошибки в рамках используемой модели канала. Для этого необходимо учесть отношение сигнала к шуму $\gamma$, однако удобнее работать с отношением сигнала к шуму с учётом количества принятой энергии на бит $\acute{\gamma}$:

\begin{equation}
\label{SNR}
    \acute{\gamma} = \frac{M E_s}{N_0} \cos^2 (\phi_s)\,,
\end{equation}

где $M$ - число символов на 1 бит, $E_s$ - количество энергии на один символ, $\frac{N_0}{2}$ - спектральная плотность шума, а $\phi_s$ - разность фазы сигнала и фазы приема.

Отношение $\frac{E_s}{N_0}$ можно выразить, как произведение $\gamma$, длительности символа $T_s$ и ширины полосы $B$. Величину $\phi_s$ можно оценить как $\frac{1}{\sqrt{\gamma T_{pr} B}}$, где $T_{pr}$ - длительность преамбулы. Подставляя это всё в \eqref{SNR}, получим

\begin{equation}
    \acute{\gamma} \approx M \gamma T_s B \cos^2 (\frac{1}{\sqrt{\gamma T_{pr} B}})
\end{equation}

Теперь можно перейти к вычислению вероятности битовой ошибки $p_e$. В самом простом случае канала AWGN $p_e$ можно вычислить как

\begin{equation}
    p_e = 2 Q(\acute{\gamma}) [1 - Q(\acute{\gamma})]
\end{equation}

Эта формула даёт слишком оптимистичное предсказание, а потому в дальнейшем расчета вероятности битовой ошибки будем использовать формулу, полученную усреднением предыдущей формулы для канала AWGN по распределению Рэлея:

\begin{equation}
\label{BER_theory}
    BER = \frac{1}{2} - 
      \frac{1}{\sqrt{1 + \frac{2}{\acute{\gamma}}}} + 
      \frac{2}{\pi} \frac{\arctan({\sqrt{1 + \frac{2}{\acute{\gamma}}}})}{\sqrt{1 + \frac{2}{\acute{\gamma}}}}.
\end{equation}

\subsection{Марковский процесс}
\label{app:Mark}
Как известно, одной из ключевых характеристик случайного процесса является плотность вероятности $\rho(X)$, где $X$ - набор аргументов (например, состояний системы и соответствующих этим состояниям времён). Тем не менее, поскольку все процессы, рассматриваемые в данной диссертационной работе, являются дискретными, плотность вероятности представляет собой линейную комбинацию дельта-функций Дирака. Подробнее о данной функции можно прочитать в учебнике \cite{Kudryavtsev2002}. Здесь же мы остановимся лишь на одном её свойстве:

\begin{equation}
    \int_{x_1}^{x_2}\delta(x-x_0)dx = 1,\qquad x_0\in[x_1, x_2]\,.
\end{equation}

Благодаря этому свойству без потери общности в дальнейшем рассуждении можно перейти от плотности вероятности к вероятностям перехода из состояния системы $f_i$ в состояние $f_j$.

Введём также на время следующее ограничение, которое упростит некоторые дальнейшие выкладки: пусть вероятность обнаружить систему в состояние $f_j$ после того, как она была в состоянии $f_i$, зависит лишь от этих состояний, но не зависит от времени. Иными словами, $P(f_j,t_j|f_i,t_i) \st{def}{=}P(f_j|f_i)$, где $P$ - вероятность перехода из состояния $f_i$ в состояние $f_j$. Аналогичным образом можно определить $P(f_j|f_{i_n},\ldots,f_{i_1})$ - вероятность обнаружить систему в состоянии $f_j$ после того, как она находилась в состояниях $f_{i_1},\ldots, f_{i_n}$. 

В общем случае изучение динамики стохастической системы осложняется в том числе тем фактом, что вероятность перехода системы в состояние $f_j$ зависит от всех предыдущих состояний системы. Таким образом с течением времени вычислительная мощность, требуемая для решения задачи, нарастает. Для того, чтобы обойти данную проблему, вводятся различные приближения. Самым естественным из них является приближение конечной "памяти" процесса: вероятность перехода в состояние $f_j$ зависит не от всех предыдущих состояний $f_i$, а только от некоторых последних $k$ состояний. 

Самым простым, но вместе с тем достаточно серьёзно зарекомендовавшим себя приближением является так называемый марковский процесс - то есть процесс с конечной "памятью" при $k=1$. Иными словами, для такого процесса $P(f_j|f_{i_n},\ldots,f_{i_1}) = P(f_j|f_{i_n})$. Благодаря этому последовательные переходы системы между состояниями могут рассматриваться, как независимые события. То есть для вероятности системы, находящейся в состоянии $f_{i_1}$, совершить эволюцию $f_{i_1}\rightarrow\ldots\rightarrow f_{i_n}\rightarrow f_j$ справедлива формула

\begin{equation}
\label{Mark_evol}
    P(f_{i_1},\ldots, f_{i_n},f_j) = P(f_{i_2}|f_{i_1})\ldots P(f_{i_n}|P_{i_{n-1}})P(f_j|f_{i_n})\,.
\end{equation}

Несмотря на кажущуюся чрезмерность упрощения, марковские процессы часто встречаются при исследовании физических, технических и экономических систем.\cite{girotti2023concentration,kato2019rfid,Schmidt2015Mark}

Рассмотрим модельный пример марковского процесса. В качестве системы рассмотрим точку, которая находится на прямой $X$, причём в качестве её координаты выступаюют целые числа. Иными словами, множество состояний рассматриваемой системы - это $\mathbb{Z}$. В начальный момент времени система находится в состоянии $x_0$ (без ограничения общности можно для простоты условиться, что $x_0=0$). Во все следующие моменты времени точка будет переходить в состояния $x_1, x_2,\ldots$, $x_i \in \mathbb{Z} \;\forall i \in\mathbb{Z}$. При этом точка может либо с вероятностью $p$ сместиться на единицу вправо относительно своего текущего положения, либо в силу нормировки вероятности, которую мы негласно подразумеваем, с вероятностью $1-p$ сместиться влево, но не остаться на месте. Таким образом

\begin{equation}
\label{Mark-example}
    P(x_{i+1}|x_i) =
    \begin{cases}
        p, & x_{i+1} = x_i+1 \\
        1-p, & x_{i+1} = x_i-1 \\
        0, & |x_{i+1} - x_i| \neq 1\,.
    \end{cases}
\end{equation}

В силу описанной выше статистической независимости переходов между состояниями марковского процесса, для эволюции $x_0\rightarrow\ldots\rightarrow x_n$, включающей в себя $n$ смещений, из которых $k$ - вправо и $n-k$ - влево, формула \eqref{Mark_evol} принимает вид

\begin{equation}
    P(x_n,\ldots,x_0) = p^k(1-p)^{n-k}
\end{equation}

Более того, поскольку для фиксированных $x_0$ и $x_n$ существует $C_n^k$ эволюций $x_0\rightarrow\ldots\rightarrow x_n$, в силу, опять же, статистической независимости переходов между состояниями марковского процесса, вероятность того, что система из состояния $x_0$ спустя $n$ переходов окажется в состоянии $x_n$, составляет $C_n^kP(x_n,\ldots,x_0) = C_n^kp^k(1-p)^{n-k}$.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.8\linewidth]{images/appendix/Figure_1.png}
    \caption{Наглядная схема неограниченного марковского процесса.}
    \label{fig:app1}
\end{figure}

Пространство состояний марковского процесса, вообще говоря, является бесконечномерным и неограниченным, как, например, это было в рассмотренном выше примере. Тем не менее, встречаются ситуации, когда пространство состояний имеет некоторую границу. То есть существует некоторое подмножество состояний $\tilde{X} \subset X$, в котором направление эволюции случайного процесса ограничено. В частности, рассмотрим предыдущий пример, изменив множество состояний системы $X$ на $\mathbb{Z}_+$ (множество неотрицательных целых чисел). Тогда $\tilde{X}$ - это точка $0$, в которой система может находиться бесконечно долго, пусть и с экспоненциально убывающей вероятностью. Тогда формула \eqref{Mark-example} примет вид

\begin{equation}
    P(x_{i+1}|x_i) =
    \begin{cases}
        p, & x_{i+1} = x_i+1 \\
        1-p, & x_{i+1} = x_i-1 \;\vee\; x_{i+1}=x_i=0 \\
        0, & |x_{i+1} - x_i| > 1\,.
    \end{cases}
\end{equation}

В данном случае удобно ввести матрицу переходных вероятностей $p_{ij}$. $\forall i,j \in \mathbb{Z_+}$

\begin{equation}
    p_{ij} = 
    \begin{pmatrix}
        1-p & p & 0&  0 & \ldots  \\
        1-p & 0& p &  0 & \ldots \\
        0 & 1 - p & 0 & p & \ldots \\
        \hdotsfor{5}
    \end{pmatrix}
\end{equation}

В остальном приведённое ранее рассуждение остаётся без изменений.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.8\linewidth]{images/appendix/Figure_2.png}
    \caption{Наглядная схема ограниченного марковского процесса.}
    \label{fig:app2}
\end{figure}

\subsection{Полумарковский процесс}
\label{app:semi-Mark}
Для того, чтобы продвинуться далее в описании стохастических систем, вновь введём зависимость вероятности перехода от времени. Это необходимо для описания ещё одной особенности Марковского процесса: вероятность нахождения системы в состоянии $f_i$ в течение времени $t$ подчиняется экспоненциальному закону распределения:

\begin{equation}
\label{Mark-time}
    P_i(t) = e^{-\lambda_it}\,,
\end{equation}

где $\lambda_i=\lambda_i(f_i)$ - интенсивность перехода из состояния $f_i$ (обратная величина среднему времени нахождения в состоянии $f_i$), а $P_i$ - вероятность перейти из состояния $f_i$ в какое-либо другое.

Рассмотрим типичную задачу. Пусть система находилась в состоянии $f_i$ в течение времени $t$. Найдём вероятность того, что после этого система задержится в состоянии $f_i$ ещё на $s$ секунд. Согласно формуле Байеса:

\begin{equation}
    P_i(t+s|t) = \frac{P(t|t+s)P(t+s)}{P(t)}\,,
\end{equation}
где $P_i(t+s|t)$ - искомая вероятность, $P_i(t|t+s)$ - вероятность того, что система находилась в состоянии $f_i$ $t$ секунд, если известно, что она находилась в нём $t+s$ (поскольку предшествующее состояние напрямую свидетельствует о последующем, $P_i(t|t+s) = 1$). Подставив \eqref{Mark-time}, имеем:

\begin{equation}
    P_i(t+s|t) = \frac{e^{-\lambda_i(t+s)}}{e^{-\lambda_it}} = e^{-\lambda_is}\,,
\end{equation}
то есть если система уже провела в состоянии $f_i$ $t$ секунд, вероятность того, что она проведёт в этом же состоянии ещё $s$ секунд не зависит от $t$. Иными словами, В Марковском процесс характеризуется "забыванием" не только истории состояний, в которых находилась система, на и времени того, сколько система находилась в этих состояниях.

Тем не менее, часто случается ситуация, в которой вероятности нахождения в том или ином состоянии не подчиняются экспоненциальному распределению, однако при этом вероятности переходов зависят лишь от текущего состояния и не зависят от предыдущих состояний. Например (и эта ситуация является самой распространённой в данной диссертации), часто встречаются ситуации, когда время нахождения системы в состоянии $f_i$ является фиксированной величиной. Подобные процессы называются Полумарковскими.

\subsection{Оценка среднего времени одного раунда передачи}
\label{sec:ch22}
Поскольку по условию все раунды передачи являются статистически независимыми, кажется наиболее логичным начать вычисление вероятности успешной идентификации метки за время взаимодействия со считывателем с вычисления вероятности успешного раунда взаимодействия метки со считывателем. Очевидно, что главным препятствием для этого взаимодействия является возможная битовая ошибка, вероятность которой мы обозначили за $p_e$. Поскольку ошибка может содержаться в любом бите сообщения длинной $Q$ бит, а наличие или отсутствие ошибки (вероятность отсутствия ошибки в конкретном бите, очевидно равна $1-p_e$) в каждом из битов мы считаем статистически независимыми событиями, вероятность того, что во всём сообщении нет ошибки, равна

\begin{equation}
    p_i = (1-p_e)^{Q_i}\,.
\end{equation}

Также учтём малость вероятности битовой ошибки. Тогда из разложения экспоненты в ряд Маклорена, 

\begin{equation}
    e^{-x} = 1 - x+\frac{1}{2}x^2-\ldots\,, 
\end{equation}

следует

\begin{equation}
\label{papprox}
    p_i \approx e^{-p_eQ_i}
\end{equation}

Данное приближение является удобным для последующих вычислений.

Рассмотрим полумарковский процесс, описывающий раунд инвентаризации в данной системе. Сам раунд инвентаризации изображён на рисунке \ref{fig:exchange}.

\begin{figure}[h]
    \centering
    \includegraphics[width=\linewidth]{images/2_chapter/exchange.png}
    \caption{Схема обмена сообщений между считывателем и меткой и вероятности переходов между этапами  случайного процесса.}
    \label{fig:exchange}
\end{figure}

\begin{table}[h]
\caption{Размеры ответов метки.}
\label{table:recal}
\centering
\begin{tabular}{|l|l|l|}
\hline
Номер этапа             & Сообщение & Длина сообщения $Q_i$, бит   \\ \hline
1  & 7 RN16 & 16   \\ \hline
2     & EPCID & 128   \\ \hline
3 & Handle & 32 \\ \hline
4   & TID & 97 \\ \hline
\end{tabular}
\end{table}

Тогда для оценки математического ожидания времени одного раунда передачи нужно для начала оценить время, характерное для каждого из этапов раунда. Сам этап может включать в себя ожидание начала передачи ответа длительностью $T_1$, передачу команды, ожидание передачи ответа длительностью $T_2$ и передачу ответа. Ответ метки состоит из $Q_i$ бит (возможные варианты представлены в таблице~\ref{table:recal}) и преамбулы длиной $Q_p$ бит, причём $Q_p$ может быть равно 7, 11, 19 или 23 бит в зависимости от кодировки. Таким образом общее время передачи ответа можно выразить, как

\begin{equation}
\label{Tans}
    \frac{M\cdot TRCal\cdot(Q_p+Q_i)}{DR}\,,
\end{equation}
где $M$ - число символов на бит ($M\leq1$)\footnote{Нужно уточнить}, $\frac{DR}{TRCal}$, как и прежде, - символьная скорость передачи.

Попробуем выразить все представленные длительности команд, ожиданий и ответов через $Tari$, которую для удобства обозначим за $\delta$. Сигнал $RTCal$ состоит из 0 и 1, а значит его длительность составляет $k_1\delta$, где $k_1\in[2.5,3]$ (в силу определения $\delta$, как длительности 0, которая в 1.5-2 раза короче длительности 1). Сигнал $TRCal$ определяется так, чтобы иметь длину в отрезке $[1.1RTCal,3RTCal]$. Таким образом $TRCal = k_2k_1\delta$, где $k_2\in[1.1,3]$. Итого, длительность команды, состоящей из преамбулы (включающей в себя разделитель, длительностью $\Tilde{\delta}\approx\delta$, $\delta$, сигналы $RTCal$ и $TRCal$) и самой команды, состоящей из $x_0$ нулей и $x_1$ единиц, составляет

\begin{equation}
    \Tilde{\delta}+\delta+k_1\delta+k_1k_2\delta+x_0+(k_1-1)\delta x_1 \approx (2+k_1+k_1k_2+x_0+(k_1-1)x_1)\delta\,.
\end{equation}

Длительность передачи ответа \eqref{Tans} также можно выразить через $\delta$:

\begin{equation}
    \frac{Mk_1k_2\delta(Q_p+Q_i)}{DR}
\end{equation}

Наконец, выразим времена $T_1$ и $T_2$. Ожидание начала передачи можно вычислить, как $max(RTCal,10T_{pri})$, где $T_{pri}=\frac{TRCal}{DR}$. Ожидание же ответа находится в отрезке $[3T_{pri},10T_{pri}]$. То есть, вводя $k_3\in[3,10]$, мы можем выписать

\begin{equation}
    \begin{gathered}
        T_1 = \delta\cdot max(k_1,\frac{10k_1k_2}{DR})\,, \\
        T_2 = \frac{k_1k_2k_3\delta}{DR}\,.
    \end{gathered}
\end{equation}

Наконец, займёмся оценкой математического ожидания времени, необходимого на один успешный раунд передачи, которое мы обозначим как $\tau$. При этом подробный вывод данного математического ожидания для различных стратегий взаимодействия считывателя и метки будет описан в следующей главе. Здесь же лишь опишем то, от чего и как должна зависеть данная величина. Очевидно, что поскольку времена всех этапов линейно зависят от $\delta$, а $p_i$ описываемого полумарковского процесса от времён не зависят, $\tau\sim\delta$. Также можно заключить, что $\tau$ растёт с ростом $p_e$ (при большой вероятности битовой ошибки время, необходимое на успешный раунд, увеличивается), однако аналитическая зависимость $\tau$ от $p_e$ уже не является столь очевидной. То же самое касается и длины $i$-го сообщения $Q_i$. Зависимость же $\tau$ от $p_i$ полностью задаётся функциями \eqref{papprox}. Наконец, имеются параметры $k_1,k_2,k_3,M$ и $DR$, которые для упрощения анализа можно зафиксировать с самого начала. Таким образом

\begin{equation}
\label{tau-pre-approx}
    \tau = \delta f(Q_i,p_e)\,,
\end{equation}
где $f(Q_i,p_e)$ - некоторая возрастающая функция, аппроксимацией которой мы займёмся далее.


\subsection{Вероятность битовой ошибки}
\label{sec:ch23}

Дальнейшее вычисление вероятности успошного считывания RFID метки потребует использования явного вида функций $p_e(\acute{\gamma}(x))$ и $\tau(Q_i,p_e)$. Вместе с тем, задаваемая формулой \eqref{BER_theory} крайне неудобна для аналитических вычислений (не говоря уже о математическом ожидании $\tau(Q_i,p_e)$, вычислению аналитической формулы которого посвящена отдельная глава данной диссертации). Поэтому для дальнейшей работы вместо функции $p_e(\acute{\gamma}(x))$ используем её аппроксимацию $\beta(x)$.

Одним из удобных методов аппроксимации является регрессия. Кратко напомним общую постановку задачи регрессии, при этом рассмотрим сначала дискретный случай. Пусть в некоторых $N$ точках $x=x_i$, $i=1,\ldots, N$, были получены экспериментальные данные $y_i$. Предположим, что эти данные могут быть с достаточной точностью аппроксимированы функцией $f(x,\alpha_m)$, где $\alpha_m$ - набор параметров. Пусть также имеется функция $E(y_i - f(x=x_i,\alpha_m))$, "адекватно" описывающая ошибку аппроксимации. Очевидно, что критерий "адекватности" будет меняться в зависимости от задачи, часто, например, $E(y_i - f(x=x_i,\alpha_m)) = (y_i - f(x=x_i,\alpha_m))^2$. В таком случае задача о поиске аппроксимирующей функции сводится к поиску таких параметров $\alpha_m$, при которых функция $E(y_i - f(x=x_i,\alpha_m))$ принимает наименьшее значение. Математически эта задача сводится к нахождению таких значений $\alpha_m^0$ параметров $\alpha_m$, что

\begin{equation}
\label{min}
    \left.\frac{\partial E}{\partial \alpha_m}\right|_{\alpha_m=\alpha_m^0} = 0
\end{equation}
и все угловые миноры матрицы $\left.\frac{\partial^2 E}{\partial \alpha_{m_1}\partial \alpha_{m_2}}\right|_{\alpha_{m_1}=\alpha_{m_1}^0, \alpha_{m_2}=\alpha_{m_2}^0}$ больше нуля, то есть

\begin{equation}
\begin{gathered}
\left.\frac{\partial^2 E}{\partial \alpha_{1}\partial\alpha_{1}}\right|_{\alpha_{m_1}=\alpha_{m_1}^0, \alpha_{m_2}=\alpha_{m_2}^0}>0 \\
\left.det[\begin{pmatrix}
  \frac{\partial^2 E}{\partial \alpha_{1}\partial\alpha_{1}}& \frac{\partial^2 E}{\partial \alpha_{1}\partial\alpha_{2}}\\
  \frac{\partial^2 E}{\partial \alpha_{2}\partial\alpha_{1}}& \frac{\partial^2 E}{\partial \alpha_{2}\partial\alpha_{2}}
\end{pmatrix}]\right|_{\alpha_{m_1}=\alpha_{m_1}^0, \alpha_{m_2}=\alpha_{m_2}^0}>0\,,
\end{gathered}
\end{equation}
и так далее. В случае линейной функции $f(x,\alpha_m)$ задача заметно упрощается, поскольку достаточно лишь проверить условие \eqref{min}

Непрерывный случай измеряемой функции $y(x)$ отличается лишь тем, что описываемая ошибку аппроксимации функция заменяется на описываемый ошибку функционал $E[(y(x) - f(x,\alpha_m)]$.

Рассмотрим график $p_e(x)$, представленный на рисунке \ref{fig:BERtheory}. Можно заметить, что самой простой аппроксимацией данной функции будет аппроксимация при помощи двух чётных полиномов $a_1+b_1(x-x_1)^{2n}$ и $a_2+b_2(x-x_2)^{2m}$, где $x_1$ и $x_2$ - положение двух локальных минимумов $\beta(x)$, $a_1$ и $a_2$ - значение функции $\beta(x)$ в этих минимумах и $n,m\in\mathbb{Z}_{+}$.

\begin{figure}[h]
    \centering
    \includegraphics[width=.9\linewidth]{images/2_chapter/BERtheory.png}
    \caption{График функции $p_e(x)$.}
    \label{fig:BERtheory}
\end{figure}

Самым простым и вместе с тем дающим хорошее приближение случаем является $m=n=1$, то есть аппроксимация при помощи двух парабол. Таким образом аппроксимация будет проводиться при помощи функции

\begin{equation}
    \beta(x) = \begin{cases}
        a_1+b_1(x-x_1)^2\,, & x<L_0 \\
        a_2+b_2(x-x_2)^2\,, & x\geq L_0
    \end{cases}
\end{equation}

где $a_1, a_2, b_1, b_2, x_1$ и $x_2$ - параметры аппроксимирующей функции, а $L_0$ - значение $x$, при котором первая парабола переходит в другую. Иными словами, $L_0$ является решением уравнения 

\begin{equation}
    a_1+b_1(L_0-x_1)^2 = a_2+b_2(L_0-x_2)^2\,,
\end{equation}

а следовательно не является свободным параметром, поскольку значение $L_0$ определяется значением остальных параметров. Также важно отметить, что поскольку у данного уравнения в общем случае может быть до двух вещественных решений, выбрать необходимо то решение, которое лежит в интервале $(x_1,x_2)$.

Поскольку аппроксимируемой функцией является вероятность битовой ошибки, важно также наложить дополнительные ограничения на аппроксимирующую функцию. Действительно, по определению вероятности $p_e$, в частности, не может принимать отрицательные или превосходящие 1 значения. Более того, функция битовой ошибки всегда находится в полуинтервале $(0,0.5)$. Тем не менее, даже при оптимальном подборе функционала $E[p_e(x)-\beta(x)]$ нет гарантии, что в этих же границах будет находиться функция $\beta(x)$. Вместе с тем, наличие точек, которые обращают $\beta(x)$ в 0, может существенно исказить предсказание вероятности успешной идентификации метки, поскольку подобные значения гарантируют успешное считывание, а для успешной индентефикации одного её успешного считывания достаточно. Однако подобное гарантированное считывание на практике не случается. В связи с этим оказывается важным найти минимум функционала $E[p_e(x)-\beta(x)]$ при выполнении дополнительных условий. При этом данные условия стоит наложить на экстремумы функции $\beta(x)$, поскольку их выполнение практически гарантирует выполнение условия $0<\beta(x)\leq 0.5$. 

Пусть $\Tilde{x}_1$ и $\Tilde{x}_2$ - точки, в которых функция $p_e(x)$ достигает своих локальных минимумов, и $\Tilde{p}_i=p_e(x_i)$, $i=1,2$. Тогда необходимо, чтобы $x_i$ и $\Tilde{x}_i$, а также $a_i$ и $\Tilde{p}_i$ отличались не более, чем на малую величину $\varepsilon$. Для дальнейшего расчёта $\varepsilon$ был взят за $0.1$. В качестве же функционала ошибки аппроксимации выберем квадрат отклонения $p_e(x)$ от аппроксимации:

\begin{equation}
\label{LSM1}
    E = \int_0^L dx(p_e(x)-\beta(x))^2\,.
\end{equation}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=.9\linewidth]{images/2_chapter/approxBER.png}
    \caption{Сравнение исходного графика $p_e(x)$ с его аппроксимацией $\beta(x)$.}
    \label{fig:approxBER}
\end{figure}

Таким образом задача о поиске оптимальной аппроксимации (результат приведён на рисунке \ref{fig:approxBER}) сводится к нахождению параметров $a_1, a_2, b_1, b_2, x_1$ и $x_2$, обращающих в минимум функционал \eqref{LSM1} при условии

\begin{equation}
    \begin{cases}
        |x_i - \Tilde{x}_i| \leq\varepsilon \\
        |a_i - \Tilde{p}_i \leq\varepsilon
    \end{cases}
\end{equation}

Вернёмся теперь к математическому ожиданию времени, необходимого на один успешный раунд передачи. Попробуем оценить, какая функция будет хорошо аппроксимировать $f(Q_i,p_e)$ из формулы \eqref{tau-pre-approx}. С одной стороны, как уже было отмечено выше, данная функция должна возрастать с ростом $p_e$. С другой стороны, по определению математического ожидания $\tau$ будет включать в себя в качестве слагаемых и множителей $p_i$, которые с достаточно большой точностью можно определить по формулам \eqref{papprox}. Из этих двух фактов вытекает, что одной из возможных аппроксимаций для математического ожидания может служить функция 

\begin{equation}
    \Tilde{\tau}(x) = \delta\Tilde{N}e^{\Tilde{Q}\beta(x)}\,,
\end{equation}

где $\Tilde{N}$ и $\Tilde{Q}$ - параметры аппроксимирующей функции, которые можно найти описанным выше способом из минимизации функционала

\begin{equation}
\label{LSM2}
    \Tilde{E} = \int_0^{0.5}dx(\tau-\Tilde{\tau})^2\,.
\end{equation}

При этом $\Tilde{Q}$ можно придать математический смысл: если заменить передачи всех описанных ранее этапов на одну передачу с максимально близким (в смысле экстремальности функционала \eqref{LSM2}) математическим ожиданием времени одного успешного раунда, то $\Tilde{Q}$ будет длиной сообщения такой передачи.

\subsection{Вероятность успешного считывания метки}
\label{sec:ch24}

Наконец, перейдём к вычислению вероятности успешной идентификации метки. Для этого, как уже отмечалось ранее, необходимо, чтобы метка была считана хотя бы один раз. Также в силу полумарковости описывыемого в данной главе процесса можно условиться, что результаты различных раундов инвентаризации статистически независимы между собой. Тогда вероятность полного успешного обмена сообщениями можно вычислить по формуле

\begin{equation}
    P_m(x)=(1-\beta(x))^Q\,,
\end{equation}
где $Q=Q_1+Q_2+Q_3+Q_4$. В силу малости $p_e$ и, как следствие, $\beta(x)$, можно воспользоваться тем же приёмом, что и в формуле \eqref{papprox} и с достаточно большой точностью положить

\begin{equation}
\label{P_m}
    P_m(x)\approx e^{-p_e(x)Q}\,.
\end{equation}

Рассмотрим точку $x\in[0,L]$ и малое отклонение от $x$ - $\Delta x$. Поскольку согласно введённому выше приближению характерное время передачи и получения сообщений (а значит, будем считать, и $\tau$ вместе с $\Tilde{\tau}$) значительно меньше, чем $\frac{L}{v}$, вероятность того, что на интервале $(x,x+\Delta x)$ метка не будет идентефицирована ни разу может быть вычислена по формуле

\begin{equation}
    P_f(x,\Delta x) = (1-P_m(x))^{\lfloor \frac{\Delta x}{v\tau(x)}\rfloor}\,,
\end{equation}

где $\lfloor\bullet\rfloor$ означает округление вниз. Данное округление присутствует в формуле в общем случае, поскольку в случае, не кратного произведению $v\tau$ $\Delta x$ может возникнуть ситуация, когда метка проехала расстояние $\acute{x}>x-v\tau$, и тогда она практически гарантированно не будет считана на интервале $(x,x+\Delta x)$. Однако при достаточно малых $\tau$ (что вполне соответствует рассматриваемому в данной работе случаю) округлением вполне можно принебречь, поскольку в таких случаях $\Delta x$ "почти кратно" $v\tau$.

Вновь, с достаточно большой точностью можно написать

\begin{equation}
    P_f(x,\Delta x) \approx e^{-P_m(x)\frac{\Delta x}{v\tau(x)}}
\end{equation}

Пусть в начале раундов движущаяся метка находится в точках $x_i\in[0,L]$. В таком случае в силу статистической независимости можно выписать вероятность того, что метка ни разу не будет идентифицированна во всей области считывания:

\begin{equation}
    P_F=\prod_{i=0}^N P_f(x_i,\Delta x_i) = \prod_{i=0}^N e^{-P_m(x_i)\frac{\Delta x_i}{v\tau(x_i)}}\,
\end{equation}

где $x_0 = 0$, $x_N\approx L-v\tau$. Однако важно учесть, что если метка въехала в область считывания в момент, когда раунд инвентаризации уже начался, она не сможет в нём поучаствовать. Поэтому для корректного результата произведение стоит начать с 1, $x_1=vT$, где $T$ - минимальное время, необходимое на один успешный раунд. 

\begin{equation}
    P_F = \prod_{i=1}^N e^{-P_m(x_i)\frac{\Delta x_i}{v\tau(x_i)}} = e^{-\sum_{i=1}^N P_m(x_i)\frac{\Delta x_i}{v\tau(x_i)}}\,.
\end{equation}

В случае достаточно малого $\tau$ с достаточно большой точностью можно заменить интегральную сумму в экспоненте на интеграл. Тогда, с учётом подстановки \eqref{P_m} вероятность того, что метка будет успешно считана, может быть вычислена по формуле 

\begin{equation}
    P = 1 - exp(-\int_{vT}^L exp(-p_e(x)Q)\frac{dx}{v\tau(x)})\,.
\end{equation}

В общем случае $\tau(x)$ и задаваемого формулой \eqref{BER_theory} $p_e$ вычислить данный интеграл аналитически представляется крайне затруднительным, если и вовсе возможным. Однако ситуация заметно упрощается при подстановке $p_e(x)\approx\beta(x)$ и $\tau(x)\approx\Tilde{\tau}(x)$. В таком случае интеграл, записанный выше, принимает вид

\begin{equation}
\label{pre-final_int}
    P = 1 - exp(-\int_{vT}^L exp(-(Q+\Tilde{Q})\beta(x))\frac{dx}{v\delta\Tilde{N}})\,.
\end{equation}

Поскольку $\beta(x)$ квадратична по $x$, \eqref{pre-final_int} является хорошо известным Гауссовым интегралом, взятие которого в конечных пределах сводится к его сведению к функции ошибок $\Phi(y)$, определяемую как

\begin{equation}
\label{Gauss}
    \Phi(y) = \frac{2}{\sqrt{\pi}}\int_0^y dx e^{-x^2}\,.
\end{equation}

Поскольку $\beta$ представляет собой две разные параболы на отрезках $[vT,L_0]$ и $[L_0,L]$, интеграл \eqref{pre-final_int} разобьётся на два интеграла с соответствующими пределами:

\begin{multline}
        P = 1 - exp(-\int_{vT}^{L_0} exp(-(Q+\Tilde{Q})(a_1+b_1(x-x_1)^2))\frac{dx}{v\delta\Tilde{N}}-\\
        -\int_{L_0}^{L} exp(-(Q+\Tilde{Q})(a_2+b_2(x-x_2)^2))\frac{dx}{v\delta\Tilde{N}})
\end{multline}

Дальнейшее взятие интеграла сводится к последовательным заменам переменных с целью свести их к виду \eqref{Gauss} и является исключительно техническим, а потому будет пропущено. Итоговая вероятность успешной идентификации метки определяется формулой

\begin{multline}
\label{P-final}
    P = 1 - exp\left(-\frac{\sqrt{\pi}e^{-a_1(Q+\Tilde{Q})}}{2v\delta\Tilde{N}\sqrt{b_1(Q+\Tilde{Q}}}[\Phi((L_0-x_1)\sqrt{b_1(Q+\Tilde{Q}})) + \right.\\
    + \Phi((x_1-vT)\sqrt{b_1(Q+\Tilde{Q}}))] - \frac{\sqrt{\pi}e^{-a_2(Q+\Tilde{Q})}}{2v\delta\Tilde{N}\sqrt{b_2(Q+\Tilde{Q}}}[\Phi((L-x_2)\sqrt{b_2(Q+\Tilde{Q}})) + \\
    + \left.\Phi((x_2-L_0)\sqrt{b_2(Q+\Tilde{Q}}))] \right)
\end{multline}

На рисунке \ref{fig:P_Analytics_vs_Imitation.png} представлена проверка формулы \eqref{P-final} при помощи имитационной модели, которая будет подробно описана в следующей главе. Во время имитационного моделирования предполагалось, что каждую секунду в область считывания заезжает новая метка.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{images/2_chapter/P_Analytics_vs_Imitation.png}
    \caption{Сравнение результатов численного моделирования с аналитической моделью.}
    \label{fig:P_Analytics_vs_Imitation.png}
\end{figure}

 Можно заметить, что при маленьких скоростях ($v<30$ м/с) аналитическая модель даёт куда более оптимистичное предсказание, чем имитационное моделирование. Это связано с тем, что по мере уменьшени скорости в область считывания начинают попадать более, чем одна метка за раз, что ведёт к возникновению коллизий, сильно уменьшающих вероятность успешного считывания. В то же время при выводе формулы \eqref{P-final} наличие коллизий в системе не было учтено. По мере увеличения скорости коллизии не исчезают, и аналитическая модель адекватно описывает взаимодействие считывателя и метки.

\subsection*{Выводы}
\addcontentsline{toc}{subsection}{Выводы}

В данной главе был рассмотрен полумарковский процесс, описывающий взаимодействие неподвижного RFID считывателя с меткой. Найдена формула, предсказывающая вероятность успешного считывания метки при разных скоростях. Данная формула хорошо согласуется (отклонение менее 5$\%$) с результатами имитационного моделирования данной системы при больших скоростях метки. В случае малых скоростей ($v\leq30$ м/с) требуется расширение аналитической модели на случай наличия коллизий.

\pagebreak

\section{Глава 3. Моделирование RFID системы на БПЛА}
\label{sec:ch3}
\subsection{Введение}
\label{sec:ch31}

В предыдущей главе были показаны результаты аналитического моделирования для вероятности идентификации автомобиля, оборудованного пассивной RFID меткой.

В данной главе рассматриваются методы оценки времени и вероятности успешного считывания сенсорных пассивных RFID меток, находящихся на поверхности земли, с помощью считывателя, установленного на борту беспилотного летательного аппарата (БПЛА). Актуальность рассматриваемой задачи обусловлена расширением применения RFID систем в условиях, где необходима бесконтактная идентификация и сбор данных в труднодоступных или опасных для человека местах. Использование БПЛА в составе RFID систем позволяет существенно увеличить радиус действия считывателя и повышает гибкость маршрутов сбора информации. Однако специфика подвижной платформы и ограниченное время контакта между меткой и считывателем требует тщательной настройки параметров протокола и выбора оптимальной стратегии взаимодействия.

\textbf{Определение 3.1} Сенсорной RFID меткой называется такая метка, которая имеет встроенный датчик телеметрии (температура, влажность почвы и т.п.).

Схема рассматриваемой системы изображена на картинке \ref{fig:uav_scheme}. На ней изображён БПЛА, на котором закреплён RFID считыватель, антенна которого направлена строго вниз. БПЛА летит прямолинейно вдоль стены, от которой происходит отражение луча, в результате чего происходит явление многолучевого распространения сигнала. Данное явление может создавать дополнительные помехи при передаче сигнала. На определённом расстоянии от стены на поверхности земли расположена сенсорная RFID метка, антенна которой направлена строго вверх.

\textbf{Определение 3.2} Сенсорным полем называется поверхность земли, на которой равномерно распределены сенсорные RFID метки.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.7\linewidth]{images/3_chapter/uav_scheme.png}
    \caption{Схема комплекса радиочастотной идентификации в случае размещения RFID на БПЛА}
    \label{fig:uav_scheme}
\end{figure}

В главе рассматриваются два основных случая размещения меток. В первом случае предполагается, что в зоне действия считывателя в каждый момент времени находится только одна метка — такой сценарий характерен для равномерного и разреженного распределения меток по сенсорному полю. Во втором случае метки расположены достаточно плотно, что приводит к появлению коллизий и требует применения специальных методов разрешения конфликтов.

\subsection{Оценка длительности команд считывателя и ответов метки}
\label{sec:ch32}

Вставить данные из стандарта о Tari, DR, RTcal, TRcal и тому подобное

\subsection{Аналитический метод оценки времени чтения без коллизий}
\label{sec:ch33}

На первом этапе моделирования исследуется упрощённый случай, в котором в зоне действия считывателя одновременно находится только одна RFID метка. Такой сценарий соответствует разреженному размещению меток на сенсорном поле, когда расстояние между соседними метками превышает радиус зоны чтения.

В данной конфигурации предполагается, что в каждый момент времени в раунде инвентаризации присутствует только одна активная метка. Для достижения этого в модели устанавливается значение параметра \texttt{Q} равным нулю, что соответствует наличию одного слота в раунде. Поскольку метка единственная, она занимает этот слот, и ответ происходит без интерференций (коллизий).

Исследование характеристик считывания одиночных меток проводилось с использованием как аналитического, так и имитационного подходов. Для построения обобщённой картины взаимодействия метки и считывателя в безколлизионном режиме были проанализированы следующие параметры:

\begin{itemize}
  \item \textbf{Высота полёта считывателя} над сенсорным полем — от $2$ до $10$ м;
  \item \textbf{Мощность передачи} сигнала считывателем — от $22$ до $31$ дБм;
  \item \textbf{Длина читаемого банка памяти} USER — $16$, $32$ и $128$ бит;
\end{itemize}


\textbf{Определение 3.2.} \textit{Кадром} называется элементарная единица обмена данными между считывателем и меткой в RFID системе. Кадр представляет собой одну законченную передачу — либо от считывателя к метке, либо от метки к считывателю — и включает в себя всю полезную нагрузку, а также служебную информацию, необходимую для корректной передачи (например, преамбулу и контрольные биты). Кадры могут содержать команды, ответы, данные памяти и используются для построения более сложных последовательностей взаимодействия, включая процедуры чтения и записи.

В рамках аналитической части моделирования было рассмотрено три характерных сценария передачи данных, отличающихся механизмами повторной передачи и фрагментации:
\begin{enumerate}
  \item \textbf{Сценарий без повторной передачи:} (рисунок \ref{fig:scenario_1}) вся USER-память передаётся одним кадром, без повторных попыток в случае неуспеха;
  \item \textbf{Сценарий с повторной передачей:} (рисунок \ref{fig:scenario_2}) в случае неуспешной передачи кадра инициируется его повторная отправка;
  \item \textbf{Сценарий с повторной передачей и фрагментацией:} (рисунок \ref{fig:scenario_3}) USER-память разбивается на несколько кадров, каждый из которых может быть повторно отправлен в случае ошибки.
\end{enumerate}

Для каждого из трёх сценариев был получен аналитический расчёт времени чтения в зависимости от длины передаваемых данных, высоты полёта и мощности считывателя. При этом учитывались параметры физического канала (затухание, вероятность ошибки кадра) и особенности протокола передачи (наличие преамбулы, паузы между кадрами и пр.).

% Вставка из статьи

Предположим, что считывателю необходимо получить N слов от сенсорной метки, и обозначим длину ответа как \(|msg|\), а \(P_{msg}\) – вероятность того, что ответ «msg» будет успешно получен. Здесь предположено, что BER не меняется во время передачи ответа, поэтому \(P_{msg}=(1-p_{er})^{|msg|}\). Если используется фрагментация, то ответ с фрагментом данных будем называть «Chunk» (он содержит 2 слова). Если размер данных нечетный, то последний chunk, содержащий одно слово, будет рассмотрен и учтён отдельно. Ззадержки доступа к данным для всех определенных ранее стратегий могут быть описаны с помощью случайных полумарковских поглощающих процессов, показанных на рисунках \ref{fig:scenario_1}, \ref{fig:scenario_2}, \ref{fig:scenario_3}. Задержка доступа является случайной величиной, равной времени от начала до поглощения. Обозначим эти случайные величины как \(\tau_1(N)\), \(\tau_2(N)\) и \(\tau_3(N)\) соответственно, где \(N\), как определено выше — это количество слов, которые нужно прочитать.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{images/3_chapter/scenario_1.png}
    \caption{Случайный процесс оценки задержки чтения данных без повторных передач}
    \label{fig:scenario_1}
\end{figure}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{images/3_chapter/scenario_2.png}
    \caption{Случайный процесс оценки задержки чтения данных с повторными передачами и без фрагментации}
    \label{fig:scenario_2}
\end{figure}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{images/3_chapter/scenario_3.png}
    \caption{Случайный процесс оценки задержки чтения данных с повторными передачами при ошибках и фрагментации данных}
    \label{fig:scenario_3}
\end{figure}

Состояния случайных процессов соответствуют состояниям метки, указанным в стандарте EPC Class 1 Gen. 2 \cite{StdGen2}. Состояние изменяется после того, как метка успешно передает ответ (см. рисунок \ref{fig:rounds} для иллюстрации раунда инвентаризации).

\begin{figure*}[htbp]
    \centering
    \includegraphics[width=.9\linewidth]{images/rfid_protocol/rounds.png}
    \caption{Раунд инвентаризации (левый столбец); обработка ошибок с повторной отправкой последней команды (средний столбец) или без повторной отправки (вверху справа); ошибки при передаче RN16 обрабатываются одинаково во всех сценариях (внизу справа).}
    \label{fig:rounds}
\end{figure*}

\begin{itemize}
    \item Arbitrate: метка получает команду «Query» с Q = 0, генерирует случайное слово RN16 и передает его считывателю;
    \item Reply: метка получает команду Ack с правильным RN16 и передает обратно свой EPCID вместе со вспомогательными данными (PC, CRC);
    \item Acknowledged: после успешной отправки EPCID считыватель запрашивает новый случайный дескриптор через команду Req\_RN, а метка возвращает его в ответе Handle. В отличие от первого ответа, он отправляет контрольную сумму вместе со сгенерированным дескриптором;
    \item Secured: метка получает команду «Read» и передает свои данные в виде заданного количества слов из банка USER;
    \item Secured\_Ri, Secured\_LC: эти состояния похожи на состояние Secured, но используются в моделировании третьего сценария для отслеживания текущего фрагмента (Secured\_Ri). Если было запрошено нечетное количество слов, состояние Secured\_LC указывает на то, что передается последний фрагмент с одним словом. В противном случае предполагается, что состояние Secured\_LC имеет нулевую длительность, и переход в поглощающее состояние выполняется с вероятностью \(P_{LastChunk}=1\).
\end{itemize}

Предположим, что EPCID составляет 96 бит, и считыватель запрашивает \(N\) слов из банка памяти USER (данные датчика). Форматы ответов меток определены в \cite{StdGen2}, а их длина в битах составляет: \(L_{RN16} = 16\), \(L_{EPC} = 128\) (EPCID, PC, CRC), \(L_{Handle} = 32\) (RN, CRC), \(L_{Data} = 16N + 33\), \(L_{Chunk} = 65\) и \(L_{LastChunk} = 49\).

Обозначим время, проведенное в состоянии \(S\), как \(T\{S\}\), время, необходимое для передачи команды или ответа «msg» как \(T_{msg}\), а задержку распространения как \(\delta\). Согласно \cite{StdGen2}, обозначим время от передачи считывателя до ответа метки как \(T_1\), а интервал между последним фиктивным битом ответа метки и началом передачи считывателя как \(T_2\). Тогда время, проведенное процессом в состояниях, можно определить следующим образом:

\begin{equation}
  \begin{gathered}
    T\{Arbitrate\} = T_{Query} + T_1 + T_{RN16} + T_2 + 2\delta \\
    T\{Reply\} = T_{Ack} + T_1 + T_{EPC} + T_2 + 2\delta \\
    T\{Acknowledged\} = T_{Req\_RN} + T_1 + T_{Handle} + T_2 + 2\delta \\
    T\{Secured\} = T_{Read} + T_1 + T_{Data} + T_2 + 2\delta \\
    T\{Secured\_Ri\} = T_{Read} + T_1 + T_{Chunk} + T_2 + 2\delta \\
    T\{Secured\_LC\} = T_{Read} + T_1 + T_{LastChunk} + T_2 + 2\delta. \\
    \end{gathered}
\end{equation}

Длительность ответа можно найти как \(T_{resp} = m/BLF(L_p + L_{resp} + 1)\), где \(L_p\) — длительность преамбулы, 1 добавлена для учета последнего фиктивного бита, \(m\) — порядок кода Миллера, а \(BLF\) — частота обратного рассеяния, \(BLF = DR/TRcal\). Длительность команд оценить не просто: считыватель использует PIE (pulse interval encoding, кодирование длительностью импульса), поэтому нужно знать точное количество нулей и единиц, поскольку эти символы имеют разную длительность. Для оценки длительности команд, в данной работе строятся эти команды, кодируется их содержимое и определяется количество нулей и единиц. Для упрощения вычислений некоторые поля заполняются равным количеством нулей и единиц, например поля контрольной суммы. Также предполагается, что \(T_1\) имеет номинальное значение \(T_1 = max(RTcal, 10T_{pri})\) и \(T_2\) имеет минимальное значение \(T_2 = 3T_{pri}\).


\subsubsection{Метод расчета времени передачи данных}

Как было отмечено ранее, в работе рассмотрены три сценария передачи данных меткой: без пересылки данных в случае ошибки, с пересылкой данных в случае ошибки и с пересылкой данных и их фрагментацией. Каждый сценарий передачи представляет собой случайный полумарковский процесс с единственным поглощающим состоянием $\xi=(n,t), n=\overline{1,N}, t \ge 0$, где $n$ - номер состояния, а $N$ - число состояний. В данном случае поглощающим состоянием является состояние с номером $n=N$. Попадание процесса в состояние с данным номером является завершением передачи данных меткой. Основной задачей является расчет математического ожидания времени до попадания процесса в поглощающее состояние при заданных вероятностях успешной передачи и среднем времени передачи на каждой фазе. Таким образом аналитической моделью рассматриваемого процесса будет математическое ожидание времени, необходимого для попадания процесса в поглощающее состояние, как функция от времени каждой фазы и вероятностей успешного перехода между ними для всех трёх описанных ранее сценариев.

\subsubsection{Сценарий без повторной передачи}

На рис.\ref{fig:graph_without_retransmission} показан граф переходов случайного процесса, описывающего передачу данных от метки к считывателю без повторной отправки. Процесс может находиться в пяти состояниях: первые четыре характеризуют отправку данных, пятое - поглощающее состояние, характеризующее окончание передачи данных. 

\begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{images/3_chapter/analytics_without_transmission.pdf}
    \caption{Граф переходов случайного процесса, описывающего передачу данных метки без повторной передачи}
    \label{fig:graph_without_retransmission}
\end{figure}

Кратко опишем, каким образом происходят переходы. Начальным состоянием процесса является состояние $1$. После чего через время $T_1$ процесс с вероятностью $P_1$ переходит в состояние $2$ и с вероятностью $1-P_1$ остается в состоянии $1$, после чего по истечении времени $T_1$ повторяется процедура перехода. Аналогично устроены переходы из состояний $i=2,3,4$: после ожидания времени $T_i$ процесс с вероятностью $P_i$ переходит в состояние $i+1$ и с вероятностью $1-P_i$ возвращается в состояние $1$.

Траекторией процесса является последовательность состояний, в которых был процесс до перехода в поглощающее состояние. Например, траекторий является $(1,2,3,4)$, когда процесс последовательно прошел все состояния без возврата в состояние $1$. Также примером траектории является $(1,2,3,1,1,2,3,4)$, где процесс дважды вернулся в состояние $1$: первый раз из состояния $3$ и второй раз из состояния $1$. Также любой траектории можно сопоставить элемент вида $(n_1,n_2,n_3,n_4)$ - где $n_i \ge 0, i=\overline{1,4}$ число возвратов процесса из состояния $i$ в состояние $1$. Можно заметить, что одному элементу $(n_1,n_2,n_3,n_4)$ соответствует $\frac{(n_1+n_2+n_3+n4)!}{n_1!n_2!n_3!n_4!}$ различных неповторяющихся траекторий. Обозначим множество $(n_1,n_2,n_3,n_4)$ $n_i \ge 0, i=\overline{1,4}$ как $\Omega$.

Среднее время до перехода в поглощающее состояние равно:

\begin{equation}
    T = \sum_{\omega \in \Omega} p_{\omega}T_{\omega},
\end{equation}

то есть сумме вероятности реализации траектории, умноженной на время до поглощающего состояния. Или что то же самое:

\begin{equation}
    \label{eq1}
    T = \sum_{\omega \in \Omega} p_{\omega}(s_1T_1 + s_2T_2+s_3T_3+s_4T_4),
\end{equation}
где $s_i$ - число пребываний процесса в состоянии $i$ для траектории $\omega$, $s_i \ge 1, i = 1,2,3,4$ для любой траектории $\omega \in \Omega$. 

Для любой траектории число нахождений в состоянии $i$ можно представить в виде суммы $s_i=m_i + n_i$, где $m_i$ - число переходов в $(i+1)$-е состояние, а $n_i$ - число переходов в состояние $1$. Тогда между числами, характеризующими любую траекторию, можно найти следующие закономерности:

\begin{equation}
    \label{eq2}
    \begin{split}
    s_1 = \sum_{i=1}^{4} n_i + 1,& s_2 = \sum_{i=2}^{4} n_i + 1,\\
    s_3 = \sum_{i=3}^{4} n_i + 1,& s_4 = n_4 + 1.\\
    \end{split}
\end{equation}

прибавление единицы к каждому значению $s_i$ означает удачный переход в поглощающее состояние. Таким образом, уравнение \ref{eq1} можно переписать в виде:

\begin{equation}
    \label{eq3}
    \begin{split}
    T = \sum_{\omega \in \Omega} p_{\omega} \big[ (\sum_{i=1}^{4} n_i + 1)T_1 & + (\sum_{i=2}^{4} n_i + 1)T_2 + \\
     +(\sum_{i=3}^{4} n_i + 1)T_3 &+ (n_4 + 1)T_4 \big],
    \end{split}
\end{equation}
а время до поглощения для траектории $\omega$ равно соответственно:

\begin{equation}
    \label{eq4}
    \begin{split}
    T_{\omega} = T_{(n_1,n_2,n_3,n_4)} =& (\sum_{i=1}^{4} n_i + 1)T_1 +\\
     + (\sum_{i=2}^{4} n_i + 1)T_2 + (\sum_{i=3}^{4} n_i & + 1)T_3 + (n_4 + 1)T_4.
    \end{split}
\end{equation}

Вероятность $p_{\omega}$ реализации траектории определяется по формуле:

\begin{equation}
    p_{\omega} = \prod _{i=1}^{4} p_{i}^{m_{i}}(1-p_{i})^{n_{i}},
\end{equation}

или с учетом уравнения \ref{eq2}:

\begin{equation}
    \begin{split}
    p_{\omega} =& p_{(n_1,n_2,n_3,n_4)} = \\ 
    = p_{1}^{n_2 + n_3 + n_4 + 1}(1-&p_1)^{n_1}\cdot p_{2}^{n_3 + n_4 + 1}(1-p_2)^{n_2}\cdot \\
    p_{3}^{n_4 + 1}(1-&p_3)^{n_3}\cdot p_4(1-p_4)^{n_4}.
    \end{split}
\end{equation}

При переходе от суммирования по множеству всевозможных траекторий к суммированию по $n_i, i = \overline{1,4}$ стоит учесть, что одному элементу суммы $(n_1,n_2,n_3,n_4)$ соответствует $C_{(n_1,n_2,n_3,n_4)} = \frac{(n_1+n_2+n_3+n4)!}{n_1!n_2!n_3!n_4!}$ различных различных траекторий. Поэтому при переходе к сумме по $n_i, i = \overline{1,4}$ получаем окончательную формулу для вычисления математического ожидания времени перехода в поглощающее состояние: 


\begin{equation}
\label{wo_repeat}
    T(p_i,T_i) = \sum_{n_1,n_2,n_3,n_4} C_{(n_1,n_2,n_3,n_4)} p_{(n_1,n_2,n_3,n_4)} T_{(n_1,n_2,n_3,n_4)}\,.
\end{equation}

Поскольку $n_i\geq0$, а верхней границы у них, вообще говоря, нет, сумма в формуле \eqref{wo_repeat} является бесконечной. Тем не менее, поскольку $p_i\leq1$, $p_{(n_1,n_2,n_3,n_4)}$, будучи произведением показательных функций от $n_i$ очень быстро убывает, а потому ряд в правой части \eqref{wo_repeat} является сходящимся. Подставив в него конкретные значения $p_i$ и $T_i$ и просуммировав получившийся ряд, можно получить математическое ожидание времени перехода в поглощающее состояние.

\subsubsection{Сценарий с повторной передачей данных}

Как было отмечено ранее, возможна модификация чтения метки, при которой повторная передача осуществляется с момента неправильно переданного фрагмента. С точки зрения переходов случайного процесса, это означает, что при неудачной отправке данных переход из состояния $i, i=\overline{1,4}$ процесс остается в этом же состоянии (см. рис.\ref{fig:graph_with_retransmission}).

Обозначим $p(n_1,n_2,n_3,n_4)$ - вероятность того, что процесс находился $n_i$ раз в $i$-м состоянии, вычисляется по следующей формуле:

\begin{equation}
    p(n_1,n_2,n_3,n_4) = \prod_{i=1}^{4} (1-p_i)^{n_i}p_i.
\end{equation}

Тогда математическое ожидание времени перехода в поглощающее состояние можно посчитать как:

\begin{equation}
    \begin{split}
    T = \sum _{n_1,n_2,n_3,n_4} p(n_1,n_2,&n_3,n_4) \sum_{i=1}^{4} (n_i+1)T_i=\\
    = \sum _{n_1,n_2,n_3,n_4} \prod_{i=1}^{4} (1- p_i &)^{n_i} p_i \sum_{i=1}^{4} (n_i+1)T_i=\\
    =\sum_{n_1=0}^{\infty}(1-p_1)^{n_1}p_1(n_1+1) & + \sum_{n_2=0}^{\infty}(1-p_2)^{n_2}p_2(n_2+1)+\\
    + \sum_{n_3=0}^{\infty}(1-p_3)^{n_3}p_3(n_3+1) & + \sum_{n_4=0}^{\infty}(1-p_4)^{n_4}p_4(n_4+1)=\\
    = \overline{T_1} + \overline{T_2} & + \overline{T_3} + \overline{T_4},
    \end{split}
\end{equation}
то есть, математическое ожидание времени перехода в поглощающее состояние равно сумме математических ожиданий времен нахождения в непоглощающих состояниях.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{images/3_chapter/analytics_with_retransmission.pdf}
    \caption{Граф переходов случайного процесса, описывающего передачу данных с повторной передачей}
    \label{fig:graph_with_retransmission}
\end{figure}

\subsubsection{Сценарий с повторной передачей и фрагментацией данных}

Математическое ожидание времени перехода в поглощающее состояние в случайно процессе, который характеризует передачу с разбиванием данных на части (рис.\ref{fig:graph_with_chunks}), вычисляется таким же образом, как и для случая с повторной отправкой данных, но с учетом всех состояний, где происходит передача данных. Формула для вычисления имеет следующий вид:


\begin{equation}
    T=\overline{T_1} + \overline{T_2} + \overline{T_3} + M\overline{T_c},
\end{equation}
где $M$-число частей, на которые разбиваются данные, а $T_c$ - время передачи части данных.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{images/3_chapter/analytics_with_chunks.pdf}
    \caption{Граф переходов случайного процесса, описывающего передачу данных с повторной передачей и фрагментацией данных}
    \label{fig:graph_with_chunks}
\end{figure}

\subsubsection{Результаты аналитического моделирования времени чтения}

Задержки доступа к данным определяются как случайные величины \(\tau_1(N)\), \(\tau_2(N)\) и \(\tau_3(N)\), описывающие время до поглощения в полумарковских случайных процессах \(\xi_1\) (см. рис. \ref{fig:scenario_1}), \(\xi_2\) (рис. \ref{fig:scenario_2}) и \(\xi_3\) (рис. \ref{fig:scenario_3}) соответственно. Численная оценка задержек доступа к данным в зависимости от BER для различных значений N дает результаты, показанные на рисунках \ref{fig:1_scenario_res}, \ref{fig:2_scenario_res}, \ref{fig:2_scenario_large}, \ref{fig:3_scenario_large}.

Для проверки аналитически полученных в предыдущей главе результатов были разработаны имитационные модели. На следующих рисунках все кривые будут представлены парами (результаты аналитического расчета, результаты имитационного моделирования). Средняя погрешность между аналитическим расчетом и имитационным моделированием не превысила \(0,5\%\).

Результаты для первого сценария показаны на рисунке \ref{fig:1_scenario_res}. Этот сценарий соответствует ситуации, когда в процессе обмена данными метка теряет сигнал от считывателя и отключается (так как не имеет собственного источника питания). Для второго сценария это же время существенно меньше, что видно из рисунка \ref{fig:2_scenario_res}. Это объясняется тем, что в случае ошибки отправки ответа метка не теряет сигнал от считывателя и остается в текущем состоянии. Благодаря этому она не тратит лишнее время на прохождение всего пути до поглощающего состояния с самого начала. Легко заметить, что в обоих случаях с ростом количества переданных слов увеличивается время, необходимое для считывания метки.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/analitica/analit_res_1.png}
    \caption{Время чтения для первого сценария}
    \label{fig:1_scenario_res}
\end{figure}

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/analitica/analit_res_2.png}
    \caption{Время чтения для второго сценария}
    \label{fig:2_scenario_res}
\end{figure}

В случае передачи большого объема данных (более 16 слов) время считывания метки может увеличиться на порядок (рис. \ref{fig:2_scenario_large}). Это связано с тем, что при высоких значениях BER слишком длинный ответ метки, содержащий все необходимые считывателю данные, скорее всего, будет потерян. В связи с этим при значениях расстояния более 10 м (BER больше 0,004) выгоднее разбить большой пакет данных на несколько частей, что соответствует сценарию 3 (рис. \ref{fig:3_scenario_large}). В этом случае потеря одного из фрагментов не приведет к серьезным потерям времени.

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/analitica/analit_res_2_large.png}
    \caption{Время чтения для второго сценария при чтении большого количества данных}
    \label{fig:2_scenario_large}
\end{figure}

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/analitica/analit_res_3_large.png}
    \caption{Время чтения для третьего сценария при чтении большого количества данных}
    \label{fig:3_scenario_large}
\end{figure}

\clearpage

\subsection{Укрупнённая имитационная модель оценки времени чтения без коллизий}
\label{sec:ch34}

Аналитические модели, использованные во второй главе, не учитывают множество аспектов, критичных для практического применения RFID систем в составе подвижных платформ. В частности, они не описывают работу с множественными метками в зоне чтения, использование адаптивных команд протокола, таких как QueryAdjust, и динамику параметра Q в процессе одного раунда инвентаризации. Эти ограничения делают невозможным полноценную оценку поведения системы в реальных условиях эксплуатации.

Для восполнения указанных пробелов в данной главе применяется дискретно-событийное имитационное моделирование, позволяющее исследовать:

\begin{itemize}
    \item влияние стартового и адаптивного значения параметра \texttt{Q} на эффективность чтения;
    \item работу алгоритма \texttt{QueryAdjust} в условиях изменения числа меток в зоне видимости;
    \item стратегии использования флага \texttt{Target} и их влияние на эффективность повторного считывания;
    \item поведение системы при различных плотностях сенсорного поля;
    \item зависимость времени и вероятности считывания от высоты полёта и скорости БПЛА.
\end{itemize}

Таким образом, в отличие от второй главы, здесь проводится комплексное численное исследование поведения RFID системы в динамической многометочной среде с учётом особенностей реализации протокола и ограничений, накладываемых на взаимодействие между считывателем и метками в реальных условиях.


\subsubsection{Общая структура модели}

Имитационная модель разработана как дискретно-событийная система, описывающая взаимодействие между подвижным считывателем и множеством пассивных RFID меток, размещённых на сенсорном поле. Архитектура модели построена в объектно-ориентированном стиле и включает следующие ключевые компоненты:

\begin{itemize}
    \item \textbf{Считыватель (Reader)} --- активное устройство, передающее управляющие команды меткам и принимающее их ответы. Поддерживает автоматическое изменение параметра $Q$ через команду \texttt{QueryAdjust}, а также реализует детерминированную или переключаемую стратегию работы с флагами \texttt{Target}. Считыватель реализован как конечный автомат с состояниями: \texttt{OFF}, \texttt{QUERY}, \texttt{QREP}, \texttt{QADJUST}, \texttt{ACK}, \texttt{REQRN}, \texttt{READ}.
    
    \item \textbf{Метки (Tag)} --- пассивные объекты, находящиеся в различных состояниях (например, \texttt{READY}, \texttt{ARBITRATE}, \texttt{REPLY}), отвечающие на команды считывателя при выполнении условий протокола EPC Gen2. Каждая метка содержит уникальные идентификаторы EPC и TID.
    
    \item \textbf{Канал передачи (Medium)} --- физическая модель радиоканала, учитывающая потери на распространение сигнала (включая отражения от препятствия вдоль следования БПЛА со считывателем), поляризационные потери, шум, доплеровский эффект, а также вычисляющая значения SNR и BER для последующей вероятностной оценки успешности приёма ответа.
    
    \item \textbf{Генератор меток (Generator)} --- вспомогательный компонент, отвечающий за создание и размещение меток в пространстве. Он моделирует поступление новых меток в зону действия считывателя согласно заданной скорости и траектории движения, а также присваивает каждой метке уникальные параметры.
\end{itemize}

Система функционирует как дискретно-событийная модель, в которой основные события включают:
\begin{itemize}
    \item начало нового раунда инвентаризации;
    \item начало и завершение слота;
    \item получение ответа от метки;
    \item успешное чтение метки (в т.ч. поля TID);
    \item обнаружение коллизии;
    \item выполнение команды \texttt{QueryAdjust} и изменение параметра $Q$;
\end{itemize}

Каждое событие сопровождается вызовами функций-обработчиков и записью данных в соответствующие журналы статистики. Это позволяет в постобработке извлекать как агрегированные характеристики (например, среднее число раундов на метку), так и полные временные траектории (например, карта мощности или время идентификации конкретной метки).

Модель поддерживает два типа режима работы:
\begin{enumerate}
    \item \textbf{Без коллизий} --- в зоне действия считывателя всегда присутствует ровно одна метка, исключая конкуренцию за канал.
    
    \item \textbf{С коллизиями} --- в каждый момент времени в сенсорном поле могут находиться несколько меток. Это отражает реалистичный сценарий плотного размещения и позволяет исследовать эффективность команд \texttt{QueryAdjust} и стратегий смены флагов \texttt{Target}.
\end{enumerate}

На рис.~\ref{fig:reader_fsm} приведена диаграмма состояний конечного автомата считывателя, отражающая его основные переходы. Диаграмма позволяет понять, как последовательность команд влияет на поведение считывателя и взаимодействие с метками в каждом слоте.

\textcolor{red}{[ЗДЕСЬ КАРТИНКА ДЛЯ НАГЛЯДНОСТИ]}

Таким образом, предложенная архитектура обеспечивает реалистичное воспроизведение сценариев взаимодействия в RFID системе на основе протокола EPC Gen2 с возможностью тонкой настройки параметров моделирования и расширенного сбора статистики.

\subsubsection{Особенности реализации модели}

Для проведения имитационного моделирования была разработана программная система на языке Python 3.12, обеспечивающая гибкое задание параметров RFID модели, параллельный запуск симуляций и последующую обработку результатов. Эксперименты с разработанной моделью и  осуществлялись в среде Jupyter Notebook, тогда как финальная версия кода была организована в виде независимого CLI-модуля, пригодного для запуска из командной строки.
Хранение входных и выходных данных реализовано с использованием библиотеки \texttt{pydantic}. Такая структура обеспечивает строгую типизацию, автоматическую валидацию и удобный формат обмена данными между частями программы. Выходными параметрами симуляции являются: 

\begin{itemize}
  \item \texttt{rounds\_per\_tag} — среднее количество раундов на одну метку;
  \item \texttt{inventory\_prob} — вероятность успешной идентификации;
  \item \texttt{read\_tid\_prob} — вероятность успешного чтения банка памяти \texttt{USER};
  \item \texttt{read\_tid\_time} — среднее время чтения;
  \item \texttt{avg\_collisions} — среднее число коллизий на метку;
  \item \texttt{execution\_time} — фактическое время выполнения симуляции.
\end{itemize}

Для повышения производительности используется встроенный модуль \texttt{multiprocessing}, позволяющий параллельно запускать несколько симуляций с различными параметрами. Для запуска модели через консоль используется модуль \texttt{click}, позволяющий передавать параметры симуляции в виде ключей (например, \texttt{-q 5 -q 6 -q 7} для задания нескольких значений параметра \texttt{Q}).

\subsubsection{Проверка корректности модели}

Для проверки корректности реализации использовались несколько подходов:
\begin{itemize}
  \item Сравнение результатов симуляции с аналитическими предсказаниями в случае отсутствия коллизий;
  \item Визуальный анализ графиков зависимости параметров считывания от расстояния, мощности, параметра \texttt{Q} и т.\,д.;
  \item Логгирование промежуточных результатов (в том числе команд QueryAdjust, коллизий и состояний слотов).
\end{itemize}

Таким образом, реализация имитационной модели сочетает гибкость настройки, модульность кода и высокую степень надёжности, позволяющую эффективно исследовать различные сценарии функционирования RFID системы.

\subsection{Влияние параметров движения и передачи на длительность чтения}
\label{sec:ch35}

Для изучения влияния различных физических параметров на длительность чтения одиночной метки были проведены численные эксперименты с использованием имитационной модели, описанной ранее. Ниже представлены три ключевых направления анализа: высота полёта считывателя, объём передаваемой информации и скорость движения БПЛА.

На рисунке~\ref{fig:single_altitude_times} приведена зависимость среднего времени чтения одной метки от высоты считывателя для различных расстояний до стены, вдоль которой движется БПЛА. Как видно из графика, увеличение высоты приводит к существенному росту времени чтения. Это объясняется усилением затухания сигнала, снижением уровня приёма и увеличением количества ошибок при передаче. При этом влияние многолучевости становится наиболее выраженным при расстоянии до стены 3 метра, где наблюдаются резкие скачки из-за фазовой интерференции прямого и отражённого сигнала. При минимальном удалении от стены (1 метр) влияние отражения, напротив, оказывается компенсирующим.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/simulation/Altitude times.pdf}
    \caption{Зависимость времени чтения метки от высоты полёта БПЛА}
    \label{fig:single_altitude_times}
\end{figure}

Следующим важным фактором является объём передаваемой информации. На рисунке~\ref{fig:single_datalen_times} показано, как меняется среднее время чтения при увеличении длины блока USER, при трёх фиксированных уровнях мощности передачи. Рост длины данных закономерно ведёт к линейному увеличению времени чтения. Однако при достижении определённого объёма (свыше 224 бит) наблюдается насыщение, вызванное тем, что время жизни метки в зоне действия считывателя ограничено. Также из графика видно, что повышение мощности с 27 до 31.5 дБм существенно снижает время чтения, особенно в случае длинных сообщений, за счёт снижения вероятности ошибки передачи.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/simulation/Length times.pdf}
    \caption{Зависимость времени чтения метки от количества передаваемых данных}
    \label{fig:single_datalen_times}
\end{figure}

На рисунке~\ref{fig:single_speed_times} приведена зависимость времени чтения от скорости считывателя при разных режимах модуляции и значениях параметра \texttt{Tari}. В случае модуляции \texttt{M8}, требующей наибольшего времени передачи, влияние скорости особенно велико: при увеличении скорости с 20 до 70 км/ч среднее время чтения заметно уменьшается. Это объясняется тем, что при высокой скорости метка проводит меньше времени в зоне действия считывателя, что сокращает доступное окно для передачи и увеличивает вероятность обрыва связи. При других режимах модуляции разница менее выражена, но также прослеживается тенденция к снижению времени чтения при росте скорости. Таким образом, оптимальный выбор модуляции и скорости должен учитывать компромисс между длительностью передачи и временем, доступным для успешного завершения обмена в рамках одного слота.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/simulation/Speed times.pdf}
    \caption{Зависимость времени чтения метки от скорости полёта БПЛА}
    \label{fig:single_speed_times}
\end{figure}

Полученные результаты подтверждают важность комплексного анализа внешних условий при выборе параметров чтения RFID меток с подвижной платформы. Имитационная модель позволяет учитывать влияние множества факторов и формировать рекомендации по настройке системы для различных сценариев эксплуатации.

\clearpage

\subsection{Имитационное моделирование системы с коллизиями}
\label{sec:ch35}

В условиях плотного размещения сенсорных RFID меток на сенсорном поле вероятность возникновения коллизий в процессе инвентаризации существенно возрастает. Для оценки влияния параметров протокола и физических условий на длительность чтения в многометочной среде был проведён ряд имитационных экспериментов, результаты которых представлены ниже. В отличие от безколлизионного сценария, здесь анализируются ситуации, в которых в зоне действия считывателя одновременно находятся 5, 15 и 25 меток. Это позволяет оценить эффективность команд разрешения конфликтов (в частности, QueryAdjust) и стратегий выбора параметра \texttt{Q}.

На рисунке~\ref{fig:mult_alt_times} представлена зависимость среднего времени чтения одной метки от высоты считывателя при различных плотностях меток. Как видно из графика, при увеличении высоты полёта происходит рост времени чтения для всех случаев, но особенно выражено это поведение при высокой плотности (25 меток). Это связано как с усилением затухания и ростом вероятности ошибки передачи, так и с увеличением длительности раундов инвентаризации, вызванных необходимостью разрешения большего количества коллизий. При малых высотах разница между сценариями с разным числом меток менее выражена, однако по мере увеличения высоты различия становятся существенными.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/simulation/Altitude times collisions.pdf}
    \caption{Зависимость среднего времени чтения одной метки от высоты полёта считывателя}
    \label{fig:mult_alt_times}
\end{figure}

На рисунке~\ref{fig:mult_datalen_times} показано, как влияет длина блока памяти USER на длительность чтения в многометочной среде. В отличие от безколлизионного случая, здесь рост объёма передаваемой информации ведёт не только к линейному увеличению времени чтения, но и к насыщению — особенно для случаев с 15 и 25 метками. Это вызвано тем, что при ограниченном времени нахождения метки в зоне действия считывателя длинный ответ может не успеть быть передан полностью, что вызывает необходимость повторных попыток и увеличивает общую задержку.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/simulation/Length times collisions.pdf}
    \caption{Зависимость среднего времени чтения одной метки от количества передаваемых данных}
    \label{fig:mult_datalen_times}
\end{figure}

На рисунке~\ref{fig:mult_speed_times} показана зависимость времени чтения от скорости движения считывателя. В отличие от других графиков, здесь при увеличении скорости наблюдается снижение среднего времени чтения одной метки. Это поведение связано с тем, что при фиксированном числе слотов в раунде (значение параметра \texttt{Q} остаётся постоянным), укороченное время пребывания метки в зоне действия считывателя снижает вероятность её многократного участия в неудачных раундах. Таким образом, метка либо успевает быть считанной за один из коротких раундов, либо быстро покидает зону действия, не внося вклад в общее время. В результате этого среднее значение времени на одну метку снижается. Однако при слишком высоких скоростях и значительном объёме данных возможны случаи неполного чтения, что должно учитываться при практическом применении системы.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/simulation/Speed times collisions.pdf}
    \caption{Зависимость среднего времени чтения одной метки от скорости полёта считывателя}
    \label{fig:mult_speed_times}
\end{figure}

Результаты моделирования показывают, что эффективное считывание меток в условиях высокой плотности требует не только корректной настройки параметров протокола, но и учёта динамических характеристик движения платформы. В частности, адаптация параметра \texttt{Q} в режиме реального времени, использование QueryAdjust и оптимизация скорости движения БПЛА позволяют существенно повысить эффективность работы системы.

\clearpage

\subsection{Исследование поведения системы при использовании команды QueryAdjust}
\label{sec:ch36}

Важным элементом протокола EPC Gen2 является механизм динамической корректировки параметра \texttt{Q} во время проведения раунда инвентаризации. Этот параметр определяет количество слотов, доступных в каждом раунде, и, соответственно, влияет на вероятность возникновения коллизий между метками, находящимися в зоне действия считывателя. Команда \texttt{QueryAdjust} позволяет считывателю адаптивно изменять значение \texttt{Q} без полного перезапуска раунда инвентаризации, в отличие от команды \texttt{Query}, которая инициирует новый раунд с заданным значением \texttt{Q}. Таким образом, использование \texttt{QueryAdjust} позволяет более гибко реагировать на изменения плотности меток.

Рассмотрим результаты численного моделирования, иллюстрирующие влияние параметра \texttt{Q} и команды \texttt{QueryAdjust} на вероятность успешного чтения метки. На рисунке~\ref{fig:q} представлена зависимость вероятности чтения пользовательской памяти (\texttt{USER}) от значения \texttt{Q} в условиях, когда в зоне действия считывателя находится только одна метка. Как видно из графика, при малых значениях \texttt{Q} (от 0 до 4) вероятность чтения остаётся высокой и практически не зависит от используемой модуляции или параметра \texttt{Tari}. Однако начиная с \texttt{Q} \(\approx\) 7 наблюдается резкое снижение вероятности. Это объясняется тем, что при увеличении числа слотов длина раунда растёт, а одиночная метка с высокой вероятностью попадает в пустые слоты и не успевает завершить чтение до выхода из зоны действия считывателя.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/simulation/Q probs.pdf}
    \caption{Зависимость вероятности чтения метки от величины Q в случае без коллизий}
    \label{fig:q}
\end{figure}

Принципиально иная картина наблюдается при наличии коллизий. На рисунке~\ref{fig:q_collision} показана зависимость вероятности чтения от значения \texttt{Q} в многометочной среде (1, 5, 15 и 25 меток). Здесь поведение метрик значительно отличается: при малых значениях \texttt{Q} практически все метки одновременно выбирают один и тот же слот, что приводит к множественным коллизиям и нулевой вероятности успешного чтения. По мере увеличения \texttt{Q} вероятность чтения начинает возрастать — количество доступных слотов увеличивается, и метки с большей вероятностью выбирают различные слоты, снижая частоту коллизий. Однако при чрезмерно больших значениях \texttt{Q} раунд становится слишком длинным, и метки снова не успевают завершить обмен до выхода из зоны действия. Таким образом, существует оптимальное значение \texttt{Q}, зависящее от плотности меток и длительности их пребывания в сенсорном поле.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/simulation/Q collision probs.pdf}
    \caption{Зависимость вероятности чтения метки от величины Q в случае с коллизиями}
    \label{fig:q_collision}
\end{figure}

Использование команды \texttt{QueryAdjust} позволяет динамически корректировать значение \texttt{Q} в течение раунда инвентаризации, повышая тем самым адаптивность системы. На рисунке~\ref{fig:q_adjust} приведены результаты моделирования, демонстрирующие поведение системы в многометочной среде при включении механизма \texttt{QueryAdjust}. Видно, что в сравнении с фиксированными значениями \texttt{Q}, использование адаптивной стратегии повышает вероятность успешного чтения, особенно в диапазоне от 5 до 10. Это связано с тем, что в начале раунда система может начать с умеренного значения \texttt{Q}, а затем корректировать его в зависимости от наблюдаемого числа коллизий и пустых слотов, тем самым сокращая общее время идентификации и увеличивая шансы на успешный обмен.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.7\textwidth]{images/3_chapter/results/simulation/Q collision probs QAdjust.pdf}
    \caption{Зависимость вероятности чтения метки от величины Q в случае с коллизиями при использовании команды QueryAdjust}
    \label{fig:q_adjust}
\end{figure}

В разработанной модели используется следующий алгоритм корректировки параметра \texttt{Q}, основанный на результатах анализа состояний слотов в текущем раунде инвентаризации:

\begin{enumerate}
\item В начале каждого нового слота считыватель ожидает один из трёх возможных исходов:
\begin{itemize}
\item \textbf{Пустой слот} — ни одна метка не отвечает (no reply);
\item \textbf{Успешный слот} — только одна метка отвечает, и ответ получен без ошибок;
\item \textbf{Коллизия} — ответили две и более меток одновременно.
\end{itemize}
\item На основе серии наблюдений за предыдущими слотоми считыватель формирует команду \texttt{QueryAdjust} со следующей логикой:
\begin{itemize}
\item Если произошла \textbf{коллизия}, считыватель увеличивает значение \texttt{Q} на 1 (\texttt{Q++});
\item Если слот был \textbf{пустым}, значение \texttt{Q} уменьшается на 1 (\texttt{Q–});
\item Если слот был \textbf{успешным}, значение \texttt{Q} сохраняется без изменений.
\end{itemize}
\item Значение \texttt{Q} принудительно ограничивается в пределах допустимого диапазона \(Q_{\min} \leq Q \leq Q_{\max}\), обычно от 0 до 15.
\item Обновлённое значение \texttt{Q} используется при формировании следующей команды \texttt{Query} и определяет количество слотов в новом раунде.
\end{enumerate}

Таким образом, алгоритм \texttt{QueryAdjust} в симуляционной модели реализует простую и эффективную стратегию адаптации под текущую нагрузку — при большом числе коллизий число слотов увеличивается, уменьшая вероятность конфликтов; при большом числе пустых слотов — уменьшается, сокращая избыточные задержки. Этот алгоритм позволяет системе автоматически находить квазиидеальное значение \texttt{Q} в условиях динамически изменяющегося числа меток в зоне видимости считывателя.

Результаты моделирования подтверждают эффективность использования команды \texttt{QueryAdjust} в условиях динамически изменяющегося числа меток и ограниченного времени пребывания в зоне действия считывателя. Применение этой команды особенно целесообразно в подвижных платформах, таких как БПЛА, где окно связи с меткой ограничено, а плотность сенсорного поля может варьироваться. Результаты позволяют рекомендовать использование \texttt{QueryAdjust} как обязательный элемент протокола при разработке гибких RFID решений для сценариев с высокой подвижностью и переменной загрузкой канала.

\clearpage

\subsection*{Выводы}
\addcontentsline{toc}{subsection}{Выводы}

Выводы

\pagebreak

\section*{Заключение}
\addcontentsline{toc}{section}{Заключение}
Основные результаты работы заключаются в следующем:

\begin{enumerate}
    \item То
    \item Сё
    \item Пятое
    \item Десятое
\end{enumerate}
\bibliographystyle{utphys}
\setlength{\itemsep}{0em}
\small
\bibliography{observe}


\end{document}